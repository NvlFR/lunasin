import{_ as Zi,i as ft,d as qr,B as xt,R as _e,e as T,E as Ui,a as Jr,p as $i,b as Ki,g as ji,c as qi,f as Ji,h as Yt,j as Qi,r as ta,k as X,m as $,l as ea,n as ct,o as Xt,q as V,s as $e,t as z,u as ut,S as Vt,v as Q,w as F,x as nt,y as O,z as Qr,A as Be,C as ti,P as ei,D as Ke,F as Ht,G as Ct,H as ra,I as ia,J as vt,K as et,L as ri,M as aa,N as be,O as dt,Q as W,T as ii,U as ai,V as Ee,W as na,X as ni,Y as oi,Z as oa,$ as H,a0 as sa,a1 as la,a2 as ua,a3 as Tt,a4 as ha,a5 as bt,a6 as K,a7 as je,a8 as ca,a9 as va,aa as fa,ab as q,ac as da,ad as ga,ae as pa,af as ya,ag as ma,ah as xa,ai as j,aj as _a,ak as ba,al as wa,am as Sa,an as Lt,ao as Qt,ap as Aa,aq as Ca,ar as J,as as Ta,at as si,au as li,av as La,aw as ui,ax as Ia,ay as wt,az as Da,aA as Gt,aB as Pa,aC as Ma,aD as se,aE as ka,aF as Ra,aG as Oa,aH as Ba,aI as we,aJ as qe,aK as Ea,aL as hi,aM as St,aN as ci,aO as Ga,aP as Na,aQ as te,aR as ee,aS as za,aT as vi,aU as ht,aV as _t,aW as Va,aX as Ha,aY as fi,aZ as Je,a_ as re,a$ as Nt,b0 as It,b1 as Ge,b2 as Wa,b3 as Fa,b4 as di,b5 as gi,b6 as Se,b7 as Ya,b8 as pi,b9 as Xa,ba as Za,bb as Ua,bc as Ne,bd as $a,be as Ka,bf as At,bg as yi,bh as Qe,bi as ja,bj as qa,bk as ie,bl as mi,bm as Ja,bn as Qa,bo as tn,bp as tr,bq as en,br as le,bs as er,bt as rr,bu as rn,bv as an,bw as nn,bx as on,by as sn,bz as ir,bA as ar,bB as ln,bC as un,bD as hn,bE as nr,bF as Et,bG as cn}from"./vendor2-Blr7A3gR.js";function or(i,e,t){var r=$i.createCanvas(),a=e.getWidth(),n=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=a+"px",o.height=n+"px",r.setAttribute("data-zr-dom-id",i)),r.width=a*t,r.height=n*t,r}var ue=function(i){Zi(e,i);function e(t,r,a){var n=i.call(this)||this;n.motionBlur=!1,n.lastFrameAlpha=.7,n.dpr=1,n.virtual=!1,n.config={},n.incremental=!1,n.zlevel=0,n.maxRepaintRectCount=5,n.__dirty=!0,n.__firstTimePaint=!0,n.__used=!1,n.__drawIndex=0,n.__startIndex=0,n.__endIndex=0,n.__prevStartIndex=null,n.__prevEndIndex=null;var o;a=a||Jr,typeof t=="string"?o=or(t,r,a):ft(t)&&(o=t,t=o.id),n.id=t,n.dom=o;var l=o.style;return l&&(qr(o),o.onselectstart=function(){return!1},l.padding="0",l.margin="0",l.borderWidth="0"),n.painter=r,n.dpr=a,n}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=or("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,a,n){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],l=this.maxRepaintRectCount,s=!1,u=new xt(0,0,0,0);function h(x){if(!(!x.isFinite()||x.isZero()))if(o.length===0){var m=new xt(0,0,0,0);m.copy(x),o.push(m)}else{for(var _=!1,b=1/0,A=0,S=0;S<o.length;++S){var w=o[S];if(w.intersect(x)){var L=new xt(0,0,0,0);L.copy(w),L.union(x),o[S]=L,_=!0;break}else if(s){u.copy(x),u.union(w);var D=x.width*x.height,C=w.width*w.height,M=u.width*u.height,I=M-D-C;I<b&&(b=I,A=S)}}if(s&&(o[A].union(x),_=!0),!_){var m=new xt(0,0,0,0);m.copy(x),o.push(m)}s||(s=o.length>=l)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var v=t[c];if(v){var f=v.shouldBePainted(a,n,!0,!0),d=v.__isRendered&&(v.__dirty&_e||!f)?v.getPrevPaintRect():null;d&&h(d);var g=f&&(v.__dirty&_e||!v.__isRendered)?v.getPaintRect():null;g&&h(g)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var v=r[c],f=v&&v.shouldBePainted(a,n,!0,!0);if(v&&(!f||!v.__zr)&&v.__isRendered){var d=v.getPrevPaintRect();d&&h(d)}}var p;do{p=!1;for(var c=0;c<o.length;){if(o[c].isZero()){o.splice(c,1);continue}for(var y=c+1;y<o.length;)o[c].intersect(o[y])?(p=!0,o[c].union(o[y]),o.splice(y,1)):y++;c++}}while(p);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var a=this.dpr,n=this.dom,o=n.style,l=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),n.width=t*a,n.height=r*a,l&&(l.width=t*a,l.height=r*a,a!==1&&this.ctxBack.scale(a,a))},e.prototype.clear=function(t,r,a){var n=this.dom,o=this.ctx,l=n.width,s=n.height;r=r||this.clearColor;var u=this.motionBlur&&!t,h=this.lastFrameAlpha,c=this.dpr,v=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,l/c,s/c));var f=this.domBack;function d(g,p,y,x){if(o.clearRect(g,p,y,x),r&&r!=="transparent"){var m=void 0;if(Ki(r)){var _=r.global||r.__width===y&&r.__height===x;m=_&&r.__canvasGradient||ji(o,r,{x:0,y:0,width:y,height:x}),r.__canvasGradient=m,r.__width=y,r.__height=x}else qi(r)&&(r.scaleX=r.scaleX||c,r.scaleY=r.scaleY||c,m=Ji(o,r,{dirty:function(){v.setUnpainted(),v.painter.refresh()}}));o.save(),o.fillStyle=m||r,o.fillRect(g,p,y,x),o.restore()}u&&(o.save(),o.globalAlpha=h,o.drawImage(f,g,p,y,x),o.restore())}!a||u?d(0,0,l,s):a.length&&T(a,function(g){d(g.x*c,g.y*c,g.width*c,g.height*c)})},e}(Ui),sr=1e5,st=314159,Zt=.01,vn=.001;function fn(i){return i?i.__builtin__?!0:!(typeof i.resize!="function"||typeof i.refresh!="function"):!1}function dn(i,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+i+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var gn=function(){function i(e,t,r,a){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var n=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=V({},r||{}),this.dpr=r.devicePixelRatio||Jr,this._singleCanvas=n,this.root=e;var o=e.style;o&&(qr(e),e.innerHTML=""),this.storage=t;var l=this._zlevelList;this._prevDisplayList=[];var s=this._layers;if(n){var h=e,c=h.width,v=h.height;r.width!=null&&(c=r.width),r.height!=null&&(v=r.height),this.dpr=r.devicePixelRatio||1,h.width=c*this.dpr,h.height=v*this.dpr,this._width=c,this._height=v;var f=new ue(h,this,this.dpr);f.__builtin__=!0,f.initContext(),s[st]=f,f.zlevel=st,l.push(st),this._domRoot=e}else{this._width=Xt(e,0,r),this._height=Xt(e,1,r);var u=this._domRoot=dn(this._width,this._height);e.appendChild(u)}}return i.prototype.getType=function(){return"canvas"},i.prototype.isSingleCanvas=function(){return this._singleCanvas},i.prototype.getViewportRoot=function(){return this._domRoot},i.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},i.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,a=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var n=0;n<a.length;n++){var o=a[n],l=this._layers[o];if(!l.__builtin__&&l.refresh){var s=n===0?this._backgroundColor:null;l.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},i.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},i.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var a={inHover:!0,viewWidth:this._width,viewHeight:this._height},n,o=0;o<t;o++){var l=e[o];l.__inHover&&(r||(r=this._hoverlayer=this.getLayer(sr)),n||(n=r.ctx,n.save()),Yt(n,l,a,o===t-1))}n&&n.restore()}},i.prototype.getHoverLayer=function(){return this.getLayer(sr)},i.prototype.paintOne=function(e,t){Qi(e,t)},i.prototype._paintList=function(e,t,r,a){if(this._redrawId===a){r=r||!1,this._updateLayerStatus(e);var n=this._doPaintList(e,t,r),o=n.finished,l=n.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),l&&this._paintHoverList(e),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var s=this;ta(function(){s._paintList(e,t,r,a)})}}},i.prototype._compositeManually=function(){var e=this.getLayer(st).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(a){a.virtual&&e.drawImage(a.dom,0,0,t,r)})},i.prototype._doPaintList=function(e,t,r){for(var a=this,n=[],o=this._opts.useDirtyRect,l=0;l<this._zlevelList.length;l++){var s=this._zlevelList[l],u=this._layers[s];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&n.push(u)}for(var h=!0,c=!1,v=function(g){var p=n[g],y=p.ctx,x=o&&p.createRepaintRects(e,t,f._width,f._height),m=r?p.__startIndex:p.__drawIndex,_=!r&&p.incremental&&Date.now,b=_&&Date.now(),A=p.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(p.__startIndex===p.__endIndex)p.clear(!1,A,x);else if(m===p.__startIndex){var S=e[m];(!S.incremental||!S.notClear||r)&&p.clear(!1,A,x)}m===-1&&(console.error("For some unknown reason. drawIndex is -1"),m=p.__startIndex);var w,L=function(I){var k={inHover:!1,allClipped:!1,prevEl:null,viewWidth:a._width,viewHeight:a._height};for(w=m;w<p.__endIndex;w++){var P=e[w];if(P.__inHover&&(c=!0),a._doPaintEl(P,p,o,I,k,w===p.__endIndex-1),_){var Z=Date.now()-b;if(Z>15)break}}k.prevElClipPaths&&y.restore()};if(x)if(x.length===0)w=p.__endIndex;else for(var D=f.dpr,C=0;C<x.length;++C){var M=x[C];y.save(),y.beginPath(),y.rect(M.x*D,M.y*D,M.width*D,M.height*D),y.clip(),L(M),y.restore()}else y.save(),L(),y.restore();p.__drawIndex=w,p.__drawIndex<p.__endIndex&&(h=!1)},f=this,d=0;d<n.length;d++)v(d);return X.wxa&&T(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:h,needsRefreshHover:c}},i.prototype._doPaintEl=function(e,t,r,a,n,o){var l=t.ctx;if(r){var s=e.getPaintRect();(!a||s&&s.intersect(a))&&(Yt(l,e,n,o),e.setPrevPaintRect(s))}else Yt(l,e,n,o)},i.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=st);var r=this._layers[e];return r||(r=new ue("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?$(r,this._layerConfig[e],!0):this._layerConfig[e-Zt]&&$(r,this._layerConfig[e-Zt],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},i.prototype.insertLayer=function(e,t){var r=this._layers,a=this._zlevelList,n=a.length,o=this._domRoot,l=null,s=-1;if(!r[e]&&fn(t)){if(n>0&&e>a[0]){for(s=0;s<n-1&&!(a[s]<e&&a[s+1]>e);s++);l=r[a[s]]}if(a.splice(s+1,0,e),r[e]=t,!t.virtual)if(l){var u=l.dom;u.nextSibling?o.insertBefore(t.dom,u.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},i.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,a=0;a<r.length;a++){var n=r[a];e.call(t,this._layers[n],n)}},i.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,a=0;a<r.length;a++){var n=r[a],o=this._layers[n];o.__builtin__&&e.call(t,o,n)}},i.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,a=0;a<r.length;a++){var n=r[a],o=this._layers[n];o.__builtin__||e.call(t,o,n)}},i.prototype.getLayers=function(){return this._layers},i.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(c,v){c.__dirty=c.__used=!1});function t(c){n&&(n.__endIndex!==c&&(n.__dirty=!0),n.__endIndex=c)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var a=e[r];if(a.zlevel!==e[r-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var n=null,o=0,l,s;for(s=0;s<e.length;s++){var a=e[s],u=a.zlevel,h=void 0;l!==u&&(l=u,o=0),a.incremental?(h=this.getLayer(u+vn,this._needsManuallyCompositing),h.incremental=!0,o=1):h=this.getLayer(u+(o>0?Zt:0),this._needsManuallyCompositing),h.__builtin__||ea("ZLevel "+u+" has been used by unkown layer "+h.id),h!==n&&(h.__used=!0,h.__startIndex!==s&&(h.__dirty=!0),h.__startIndex=s,h.incremental?h.__drawIndex=-1:h.__drawIndex=s,t(s),n=h),a.__dirty&_e&&!a.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=s))}t(s),this.eachBuiltinLayer(function(c,v){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},i.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},i.prototype._clearLayer=function(e){e.clear()},i.prototype.setBackgroundColor=function(e){this._backgroundColor=e,T(this._layers,function(t){t.setUnpainted()})},i.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?$(r[e],t,!0):r[e]=t;for(var a=0;a<this._zlevelList.length;a++){var n=this._zlevelList[a];if(n===e||n===e+Zt){var o=this._layers[n];$(o,r[e],!0)}}}},i.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,a=t[e];a&&(a.dom.parentNode.removeChild(a.dom),delete t[e],r.splice(ct(r,e),1))},i.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var a=this._opts,n=this.root;if(e!=null&&(a.width=e),t!=null&&(a.height=t),e=Xt(n,0,a),t=Xt(n,1,a),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(st).resize(e,t)}return this},i.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},i.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},i.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[st].dom;var t=new ue("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var a=t.dom.width,n=t.dom.height;this.eachLayer(function(c){c.__builtin__?r.drawImage(c.dom,0,0,a,n):c.renderToCanvas&&(r.save(),c.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},l=this.storage.getDisplayList(!0),s=0,u=l.length;s<u;s++){var h=l[s];Yt(r,h,o,s===u-1)}return t.dom},i.prototype.getWidth=function(){return this._width},i.prototype.getHeight=function(){return this._height},i}();function Ps(i){i.registerPainter("canvas",gn)}function pn(i,e){var t=i.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var a=$e(i,e,t[0]);return a!=null?a+"":null}else if(r){for(var n=[],o=0;o<t.length;o++)n.push($e(i,e,t[o]));return n.join(" ")}}function yn(i,e){var t=i.mapDimensionsAll("defaultedLabel");if(!z(e))return e+"";for(var r=[],a=0;a<t.length;a++){var n=i.getDimensionIndex(t[a]);n>=0&&r.push(e[n])}return r.join(" ")}function mn(i,e,t,r,a){var n=i.getArea(),o=n.x,l=n.y,s=n.width,u=n.height,h=t.get(["lineStyle","width"])||2;o-=h/2,l-=h/2,s+=h,u+=h,s=Math.ceil(s),o!==Math.floor(o)&&(o=Math.floor(o),s++);var c=new Q({shape:{x:o,y:l,width:s,height:u}});return c}function xn(i,e,t){var r=i.getArea(),a=ut(r.r0,1),n=ut(r.r,1),o=new Vt({shape:{cx:ut(i.cx,1),cy:ut(i.cy,1),r0:a,r:n,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return o}function _n(i,e,t,r,a){if(i){if(i.type==="polar")return xn(i);if(i.type==="cartesian2d")return mn(i,e,t)}else return null;return null}function xi(i,e){return i.type===e}var bn={average:function(i){for(var e=0,t=0,r=0;r<i.length;r++)isNaN(i[r])||(e+=i[r],t++);return t===0?NaN:e/t},sum:function(i){for(var e=0,t=0;t<i.length;t++)e+=i[t]||0;return e},max:function(i){for(var e=-1/0,t=0;t<i.length;t++)i[t]>e&&(e=i[t]);return isFinite(e)?e:NaN},min:function(i){for(var e=1/0,t=0;t<i.length;t++)i[t]<e&&(e=i[t]);return isFinite(e)?e:NaN},minmax:function(i){for(var e=-1/0,t=-1/0,r=0;r<i.length;r++){var a=i[r],n=Math.abs(a);n>e&&(e=n,t=a)}return isFinite(t)?t:NaN},nearest:function(i){return i[0]}},wn=function(i){return Math.round(i.length/2)};function Sn(i){return{seriesType:i,reset:function(e,t,r){var a=e.getData(),n=e.get("sampling"),o=e.coordinateSystem,l=a.count();if(l>10&&o.type==="cartesian2d"&&n){var s=o.getBaseAxis(),u=o.getOtherAxis(s),h=s.getExtent(),c=r.getDevicePixelRatio(),v=Math.abs(h[1]-h[0])*(c||1),f=Math.round(l/v);if(isFinite(f)&&f>1){n==="lttb"&&e.setData(a.lttbDownSample(a.mapDimension(u.dim),1/f));var d=void 0;F(n)?d=bn[n]:nt(n)&&(d=n),d&&e.setData(a.downSample(a.mapDimension(u.dim),1/f,d,wn))}}}}}var Ae=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Qr(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,a){var n=this.coordinateSystem;if(n&&n.clampData){var o=n.clampData(t),l=n.dataToPoint(o);if(a)T(n.getAxes(),function(v,f){if(v.type==="category"&&r!=null){var d=v.getTicksCoords(),g=v.getTickModel().get("alignWithLabel"),p=o[f],y=r[f]==="x1"||r[f]==="y1";if(y&&!g&&(p+=1),d.length<2)return;if(d.length===2){l[f]=v.toGlobalCoord(v.getExtent()[y?1:0]);return}for(var x=void 0,m=void 0,_=1,b=0;b<d.length;b++){var A=d[b].coord,S=b===d.length-1?d[b-1].tickValue+_:d[b].tickValue;if(S===p){m=A;break}else if(S<p)x=A;else if(x!=null&&S>p){m=(A+x)/2;break}b===1&&(_=S-d[0].tickValue)}m==null&&(x?x&&(m=d[d.length-1].coord):m=d[0].coord),l[f]=v.toGlobalCoord(m)}});else{var s=this.getData(),u=s.getLayout("offset"),h=s.getLayout("size"),c=n.getBaseAxis().isHorizontal()?0:1;l[c]+=u+h/2}return l}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Be);Be.registerClass(Ae);var An=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return Qr(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,a){return a.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=ti(Ae.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Ae),Cn=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),lr=function(i){O(e,i);function e(t){var r=i.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Cn},e.prototype.buildPath=function(t,r){var a=r.cx,n=r.cy,o=Math.max(r.r0||0,0),l=Math.max(r.r,0),s=(l-o)*.5,u=o+s,h=r.startAngle,c=r.endAngle,v=r.clockwise,f=Math.PI*2,d=v?c-h<f:h-c<f;d||(h=c-(v?f:-f));var g=Math.cos(h),p=Math.sin(h),y=Math.cos(c),x=Math.sin(c);d?(t.moveTo(g*o+a,p*o+n),t.arc(g*u+a,p*u+n,s,-Math.PI+h,h,!v)):t.moveTo(g*l+a,p*l+n),t.arc(a,n,l,h,c,!v),t.arc(y*u+a,x*u+n,s,c-Math.PI*2,c-Math.PI,!v),o!==0&&t.arc(a,n,o,c,h,v)},e}(ei);function Tn(i,e){e=e||{};var t=e.isRoundCap;return function(r,a,n){var o=a.position;if(!o||o instanceof Array)return Ke(r,a,n);var l=i(o),s=a.distance!=null?a.distance:5,u=this.shape,h=u.cx,c=u.cy,v=u.r,f=u.r0,d=(v+f)/2,g=u.startAngle,p=u.endAngle,y=(g+p)/2,x=t?Math.abs(v-f)/2:0,m=Math.cos,_=Math.sin,b=h+v*m(g),A=c+v*_(g),S="left",w="top";switch(l){case"startArc":b=h+(f-s)*m(y),A=c+(f-s)*_(y),S="center",w="top";break;case"insideStartArc":b=h+(f+s)*m(y),A=c+(f+s)*_(y),S="center",w="bottom";break;case"startAngle":b=h+d*m(g)+Ut(g,s+x,!1),A=c+d*_(g)+$t(g,s+x,!1),S="right",w="middle";break;case"insideStartAngle":b=h+d*m(g)+Ut(g,-s+x,!1),A=c+d*_(g)+$t(g,-s+x,!1),S="left",w="middle";break;case"middle":b=h+d*m(y),A=c+d*_(y),S="center",w="middle";break;case"endArc":b=h+(v+s)*m(y),A=c+(v+s)*_(y),S="center",w="bottom";break;case"insideEndArc":b=h+(v-s)*m(y),A=c+(v-s)*_(y),S="center",w="top";break;case"endAngle":b=h+d*m(p)+Ut(p,s+x,!0),A=c+d*_(p)+$t(p,s+x,!0),S="left",w="middle";break;case"insideEndAngle":b=h+d*m(p)+Ut(p,-s+x,!0),A=c+d*_(p)+$t(p,-s+x,!0),S="right",w="middle";break;default:return Ke(r,a,n)}return r=r||{},r.x=b,r.y=A,r.align=S,r.verticalAlign=w,r}}function Ln(i,e,t,r){if(Ht(r)){i.setTextConfig({rotation:r});return}else if(z(e)){i.setTextConfig({rotation:0});return}var a=i.shape,n=a.clockwise?a.startAngle:a.endAngle,o=a.clockwise?a.endAngle:a.startAngle,l=(n+o)/2,s,u=t(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":s=l;break;case"startAngle":case"insideStartAngle":s=n;break;case"endAngle":case"insideEndAngle":s=o;break;default:i.setTextConfig({rotation:0});return}var h=Math.PI*1.5-s;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),i.setTextConfig({rotation:h})}function Ut(i,e,t){return e*Math.sin(i)*(t?-1:1)}function $t(i,e,t){return e*Math.cos(i)*(t?1:-1)}function Bt(i,e,t){var r=i.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;z(r)||(r=[r,r,r,r]);var a=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Ct(r,function(n){return ra(n,a)})}}var he=Math.max,ce=Math.min;function In(i,e){var t=i.getArea&&i.getArea();if(xi(i,"cartesian2d")){var r=i.getBaseAxis();if(r.type!=="category"||!r.onBand){var a=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=a,t.width+=a*2):(t.y-=a,t.height+=a*2)}}return t}var Dn=function(i){O(e,i);function e(){var t=i.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,a,n){this._model=t,this._removeOnRenderedListener(a),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,a):this._renderNormal(t,r,a,n))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){ia(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,a,n){var o=this.group,l=t.getData(),s=this._data,u=t.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var v=t.isAnimationEnabled()?t:null,f=Pn(t,u);f&&this._enableRealtimeSort(f,l,a);var d=t.get("clip",!0)||f,g=In(u,l);o.removeClipPath();var p=t.get("roundCap",!0),y=t.get("showBackground",!0),x=t.getModel("backgroundStyle"),m=x.get("borderRadius")||0,_=[],b=this._backgroundEls,A=n&&n.isInitSort,S=n&&n.type==="changeAxisOrder";function w(C){var M=Kt[u.type](l,C),I=Gn(u,c,M);return I.useStyle(x.getItemStyle()),u.type==="cartesian2d"?I.setShape("r",m):I.setShape("cornerRadius",m),_[C]=I,I}l.diff(s).add(function(C){var M=l.getItemModel(C),I=Kt[u.type](l,C,M);if(y&&w(C),!(!l.hasValue(C)||!fr[u.type](I))){var k=!1;d&&(k=ur[u.type](g,I));var P=hr[u.type](t,l,C,I,c,v,h.model,!1,p);f&&(P.forceLabelAnimation=!0),dr(P,l,C,M,I,t,c,u.type==="polar"),A?P.attr({shape:I}):f?cr(f,v,P,I,C,c,!1,!1):vt(P,{shape:I},t,C),l.setItemGraphicEl(C,P),o.add(P),P.ignore=k}}).update(function(C,M){var I=l.getItemModel(C),k=Kt[u.type](l,C,I);if(y){var P=void 0;b.length===0?P=w(M):(P=b[M],P.useStyle(x.getItemStyle()),u.type==="cartesian2d"?P.setShape("r",m):P.setShape("cornerRadius",m),_[C]=P);var Z=Kt[u.type](l,C),Y=bi(c,Z,u);et(P,{shape:Y},v,C)}var R=s.getItemGraphicEl(M);if(!l.hasValue(C)||!fr[u.type](k)){o.remove(R);return}var B=!1;if(d&&(B=ur[u.type](g,k),B&&o.remove(R)),R?ri(R):R=hr[u.type](t,l,C,k,c,v,h.model,!!R,p),f&&(R.forceLabelAnimation=!0),S){var G=R.getTextContent();if(G){var E=aa(G);E.prevValue!=null&&(E.prevValue=E.value)}}else dr(R,l,C,I,k,t,c,u.type==="polar");A?R.attr({shape:k}):f?cr(f,v,R,k,C,c,!0,S):et(R,{shape:k},t,C,null),l.setItemGraphicEl(C,R),R.ignore=B,o.add(R)}).remove(function(C){var M=s.getItemGraphicEl(C);M&&be(M,t,C)}).execute();var L=this._backgroundGroup||(this._backgroundGroup=new dt);L.removeAll();for(var D=0;D<_.length;++D)L.add(_[D]);o.add(L),this._backgroundEls=_,this._data=l},e.prototype._renderLarge=function(t,r,a){this._clear(),pr(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),pr(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&_n(t.coordinateSystem,!1,t),a=this.group;r?a.setClipPath(r):a.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,a){var n=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,a),this._isFirstFrame=!1;else{var l=function(s){var u=r.getItemGraphicEl(s),h=u&&u.shape;return h&&Math.abs(o.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){n._updateSortWithinSameData(r,l,o,a)},a.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,a){var n=[];return t.each(t.mapDimension(r.dim),function(o,l){var s=a(l);s=s??NaN,n.push({dataIndex:l,mappedValue:s,ordinalNumber:o})}),n.sort(function(o,l){return l.mappedValue-o.mappedValue}),{ordinalNumbers:Ct(n,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,a){for(var n=a.scale,o=t.mapDimension(a.dim),l=Number.MAX_VALUE,s=0,u=n.getOrdinalMeta().categories.length;s<u;++s){var h=t.rawIndexOf(o,n.getRawOrdinalNumber(s)),c=h<0?Number.MIN_VALUE:r(t.indexOfRawIndex(h));if(c>l)return!0;l=c}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var a=r.scale,n=a.getExtent(),o=Math.max(0,n[0]),l=Math.min(n[1],a.getOrdinalMeta().categories.length-1);o<=l;++o)if(t.ordinalNumbers[o]!==a.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,a,n){if(this._isOrderChangedWithinSameData(t,r,a)){var o=this._dataSort(t,a,r);this._isOrderDifferentInView(o,a)&&(this._removeOnRenderedListener(n),n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,a){var n=r.baseAxis,o=this._dataSort(t,n,function(l){return t.get(t.mapDimension(r.otherAxis.dim),l)});a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",isInitSort:!0,axisId:n.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,a=this._data;t&&t.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(n){be(n,t,W(n).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(ii),ur={cartesian2d:function(i,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var a=i.x+i.width,n=i.y+i.height,o=he(e.x,i.x),l=ce(e.x+e.width,a),s=he(e.y,i.y),u=ce(e.y+e.height,n),h=l<o,c=u<s;return e.x=h&&o>a?l:o,e.y=c&&s>n?u:s,e.width=h?0:l-o,e.height=c?0:u-s,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),h||c},polar:function(i,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var a=ce(e.r,i.r),n=he(e.r0,i.r0);e.r=a,e.r0=n;var o=a-n<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},hr={cartesian2d:function(i,e,t,r,a,n,o,l,s){var u=new Q({shape:V({},r),z2:1});if(u.__dataIndex=t,u.name="item",n){var h=u.shape,c=a?"height":"width";h[c]=0}return u},polar:function(i,e,t,r,a,n,o,l,s){var u=!a&&s?lr:Vt,h=new u({shape:r,z2:1});h.name="item";var c=_i(a);if(h.calculateTextPosition=Tn(c,{isRoundCap:u===lr}),n){var v=h.shape,f=a?"r":"endAngle",d={};v[f]=a?r.r0:r.startAngle,d[f]=r[f],(l?et:vt)(h,{shape:d},n)}return h}};function Pn(i,e){var t=i.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function cr(i,e,t,r,a,n,o,l){var s,u;n?(u={x:r.x,width:r.width},s={y:r.y,height:r.height}):(u={y:r.y,height:r.height},s={x:r.x,width:r.width}),l||(o?et:vt)(t,{shape:s},e,a,null);var h=e?i.baseAxis.model:null;(o?et:vt)(t,{shape:u},h,a)}function vr(i,e){for(var t=0;t<e.length;t++)if(!isFinite(i[e[t]]))return!0;return!1}var Mn=["x","y","width","height"],kn=["cx","cy","r","startAngle","endAngle"],fr={cartesian2d:function(i){return!vr(i,Mn)},polar:function(i){return!vr(i,kn)}},Kt={cartesian2d:function(i,e,t){var r=i.getItemLayout(e),a=t?On(t,r):0,n=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+n*a/2,y:r.y+o*a/2,width:r.width-n*a,height:r.height-o*a}},polar:function(i,e,t){var r=i.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Rn(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function _i(i){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(i)}function dr(i,e,t,r,a,n,o,l){var s=e.getItemVisual(t,"style");if(l){if(!n.get("roundCap")){var h=i.shape,c=Bt(r.getModel("itemStyle"),h,!0);V(h,c),i.setShape(h)}}else{var u=r.get(["itemStyle","borderRadius"])||0;i.setShape("r",u)}i.useStyle(s);var v=r.getShallow("cursor");v&&i.attr("cursor",v);var f=l?o?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":o?a.height>=0?"bottom":"top":a.width>=0?"right":"left",d=ai(r);Ee(i,d,{labelFetcher:n,labelDataIndex:t,defaultText:pn(n.getData(),t),inheritColor:s.fill,defaultOpacity:s.opacity,defaultOutsidePosition:f});var g=i.getTextContent();if(l&&g){var p=r.get(["label","position"]);i.textConfig.inside=p==="middle"?!0:null,Ln(i,p==="outside"?f:p,_i(o),r.get(["label","rotate"]))}na(g,d,n.getRawValue(t),function(x){return yn(e,x)});var y=r.getModel(["emphasis"]);ni(i,y.get("focus"),y.get("blurScope"),y.get("disabled")),oi(i,r),Rn(a)&&(i.style.fill="none",i.style.stroke="none",T(i.states,function(x){x.style&&(x.style.fill=x.style.stroke="none")}))}function On(i,e){var t=i.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=i.get(["itemStyle","borderWidth"])||0,a=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),n=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,a,n)}var Bn=function(){function i(){}return i}(),gr=function(i){O(e,i);function e(t){var r=i.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new Bn},e.prototype.buildPath=function(t,r){for(var a=r.points,n=this.baseDimIdx,o=1-this.baseDimIdx,l=[],s=[],u=this.barWidth,h=0;h<a.length;h+=3)s[n]=u,s[o]=a[h+2],l[n]=a[h+n],l[o]=a[h+o],t.rect(l[0],l[1],s[0],s[1])},e}(ei);function pr(i,e,t,r){var a=i.getData(),n=a.getLayout("valueAxisHorizontal")?1:0,o=a.getLayout("largeDataIndices"),l=a.getLayout("size"),s=i.getModel("backgroundStyle"),u=a.getLayout("largeBackgroundPoints");if(u){var h=new gr({shape:{points:u},incremental:!!r,silent:!0,z2:0});h.baseDimIdx=n,h.largeDataIndices=o,h.barWidth=l,h.useStyle(s.getItemStyle()),e.add(h),t&&t.push(h)}var c=new gr({shape:{points:a.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=n,c.largeDataIndices=o,c.barWidth=l,e.add(c),c.useStyle(a.getVisual("style")),W(c).seriesIndex=i.seriesIndex,i.get("silent")||(c.on("mousedown",yr),c.on("mousemove",yr)),t&&t.push(c)}var yr=oa(function(i){var e=this,t=En(e,i.offsetX,i.offsetY);W(e).dataIndex=t>=0?t:null},30,!1);function En(i,e,t){for(var r=i.baseDimIdx,a=1-r,n=i.shape.points,o=i.largeDataIndices,l=[],s=[],u=i.barWidth,h=0,c=n.length/3;h<c;h++){var v=h*3;if(s[r]=u,s[a]=n[v+2],l[r]=n[v+r],l[a]=n[v+a],s[a]<0&&(l[a]+=s[a],s[a]=-s[a]),e>=l[0]&&e<=l[0]+s[0]&&t>=l[1]&&t<=l[1]+s[1])return o[h]}return-1}function bi(i,e,t){if(xi(t,"cartesian2d")){var r=e,a=t.getArea();return{x:i?r.x:a.x,y:i?a.y:r.y,width:i?r.width:a.width,height:i?a.height:r.height}}else{var a=t.getArea(),n=e;return{cx:a.cx,cy:a.cy,r0:i?a.r0:n.r0,r:i?a.r:n.r,startAngle:i?n.startAngle:0,endAngle:i?n.endAngle:Math.PI*2}}}function Gn(i,e,t){var r=i.type==="polar"?Vt:Q;return new r({shape:bi(e,t,i),silent:!0,z2:0})}function Ms(i){i.registerChartView(Dn),i.registerSeriesModel(An),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,H(sa,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,la("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,Sn("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(a){e.sortInfo&&a.axis.setCategorySortInfo(e.sortInfo)})})}var mr=Math.PI*2,jt=Math.PI/180;function wi(i,e){return bt(i.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Si(i,e){var t=wi(i,e),r=i.get("center"),a=i.get("radius");z(a)||(a=[0,a]);var n=K(t.width,e.getWidth()),o=K(t.height,e.getHeight()),l=Math.min(n,o),s=K(a[0],l/2),u=K(a[1],l/2),h,c,v=i.coordinateSystem;if(v){var f=v.dataToPoint(r);h=f[0]||0,c=f[1]||0}else z(r)||(r=[r,r]),h=K(r[0],n)+t.x,c=K(r[1],o)+t.y;return{cx:h,cy:c,r0:s,r:u}}function Nn(i,e,t){e.eachSeriesByType(i,function(r){var a=r.getData(),n=a.mapDimension("value"),o=wi(r,t),l=Si(r,t),s=l.cx,u=l.cy,h=l.r,c=l.r0,v=-r.get("startAngle")*jt,f=r.get("endAngle"),d=r.get("padAngle")*jt;f=f==="auto"?v-mr:-f*jt;var g=r.get("minAngle")*jt,p=g+d,y=0;a.each(n,function(Y){!isNaN(Y)&&y++});var x=a.getSum(n),m=Math.PI/(x||y)*2,_=r.get("clockwise"),b=r.get("roseType"),A=r.get("stillShowZeroSum"),S=a.getDataExtent(n);S[0]=0;var w=_?1:-1,L=[v,f],D=w*d/2;ua(L,!_),v=L[0],f=L[1];var C=Ai(r);C.startAngle=v,C.endAngle=f,C.clockwise=_;var M=Math.abs(f-v),I=M,k=0,P=v;if(a.setLayout({viewRect:o,r:h}),a.each(n,function(Y,R){var B;if(isNaN(Y)){a.setItemLayout(R,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:_,cx:s,cy:u,r0:c,r:b?NaN:h});return}b!=="area"?B=x===0&&A?m:Y*m:B=M/y,B<p?(B=p,I-=p):k+=Y;var G=P+w*B,E=0,N=0;d>B?(E=P+w*B/2,N=E):(E=P+D,N=G-D),a.setItemLayout(R,{angle:B,startAngle:E,endAngle:N,clockwise:_,cx:s,cy:u,r0:c,r:b?ha(Y,S,[c,h]):h}),P=G}),I<mr&&y)if(I<=.001){var Z=M/y;a.each(n,function(Y,R){if(!isNaN(Y)){var B=a.getItemLayout(R);B.angle=Z;var G=0,E=0;Z<d?(G=v+w*(R+1/2)*Z,E=G):(G=v+w*R*Z+D,E=v+w*(R+1)*Z-D),B.startAngle=G,B.endAngle=E}})}else m=I/k,P=v,a.each(n,function(Y,R){if(!isNaN(Y)){var B=a.getItemLayout(R),G=B.angle===p?p:Y*m,E=0,N=0;G<d?(E=P+w*G/2,N=E):(E=P+D,N=P+w*G-D),B.startAngle=E,B.endAngle=N,P+=w*G}})})}var Ai=Tt();function zn(i){return{seriesType:i,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var a=e.getData();a.filterSelf(function(n){for(var o=a.getName(n),l=0;l<r.length;l++)if(!r[l].isSelected(o))return!1;return!0})}}}}var Vn=Math.PI/180;function xr(i,e,t,r,a,n,o,l,s,u){if(i.length<2)return;function h(g){for(var p=g.rB,y=p*p,x=0;x<g.list.length;x++){var m=g.list[x],_=Math.abs(m.label.y-t),b=r+m.len,A=b*b,S=Math.sqrt((1-Math.abs(_*_/y))*A),w=e+(S+m.len2)*a,L=w-m.label.x,D=m.targetTextWidth-L*a;Ci(m,D,!0),m.label.x=w}}function c(g){for(var p={list:[],maxY:0},y={list:[],maxY:0},x=0;x<g.length;x++)if(g[x].labelAlignTo==="none"){var m=g[x],_=m.label.y>t?y:p,b=Math.abs(m.label.y-t);if(b>=_.maxY){var A=m.label.x-e-m.len2*a,S=r+m.len,w=Math.abs(A)<S?Math.sqrt(b*b/(1-A*A/S/S)):S;_.rB=w,_.maxY=b}_.list.push(m)}h(p),h(y)}for(var v=i.length,f=0;f<v;f++)if(i[f].position==="outer"&&i[f].labelAlignTo==="labelLine"){var d=i[f].label.x-u;i[f].linePoints[1][0]+=d,i[f].label.x=u}fa(i,s,s+o)&&c(i)}function Hn(i,e,t,r,a,n,o,l){for(var s=[],u=[],h=Number.MAX_VALUE,c=-Number.MAX_VALUE,v=0;v<i.length;v++){var f=i[v].label;ve(i[v])||(f.x<e?(h=Math.min(h,f.x),s.push(i[v])):(c=Math.max(c,f.x),u.push(i[v])))}for(var v=0;v<i.length;v++){var d=i[v];if(!ve(d)&&d.linePoints){if(d.labelStyleWidth!=null)continue;var f=d.label,g=d.linePoints,p=void 0;d.labelAlignTo==="edge"?f.x<e?p=g[2][0]-d.labelDistance-o-d.edgeDistance:p=o+a-d.edgeDistance-g[2][0]-d.labelDistance:d.labelAlignTo==="labelLine"?f.x<e?p=h-o-d.bleedMargin:p=o+a-c-d.bleedMargin:f.x<e?p=f.x-o-d.bleedMargin:p=o+a-f.x-d.bleedMargin,d.targetTextWidth=p,Ci(d,p)}}xr(u,e,t,r,1,a,n,o,l,c),xr(s,e,t,r,-1,a,n,o,l,h);for(var v=0;v<i.length;v++){var d=i[v];if(!ve(d)&&d.linePoints){var f=d.label,g=d.linePoints,y=d.labelAlignTo==="edge",x=f.style.padding,m=x?x[1]+x[3]:0,_=f.style.backgroundColor?0:m,b=d.rect.width+_,A=g[1][0]-g[2][0];y?f.x<e?g[2][0]=o+d.edgeDistance+b+d.labelDistance:g[2][0]=o+a-d.edgeDistance-b-d.labelDistance:(f.x<e?g[2][0]=f.x+d.labelDistance:g[2][0]=f.x-d.labelDistance,g[1][0]=g[2][0]+A),g[1][1]=g[2][1]=f.y}}}function Ci(i,e,t){if(t===void 0&&(t=!1),i.labelStyleWidth==null){var r=i.label,a=r.style,n=i.rect,o=a.backgroundColor,l=a.padding,s=l?l[1]+l[3]:0,u=a.overflow,h=n.width+(o?0:s);if(e<h||t){var c=n.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-s);var v=r.getBoundingRect();r.setStyle("width",Math.ceil(v.width)),r.setStyle("backgroundColor",o)}else{var f=e-s,d=e<h?f:t?f>i.unconstrainedWidth?null:f:null;r.setStyle("width",d)}var g=r.getBoundingRect();n.width=g.width;var p=(r.style.margin||0)+2.1;n.height=g.height+p,n.y-=(n.height-c)/2}}}function ve(i){return i.position==="center"}function Wn(i){var e=i.getData(),t=[],r,a,n=!1,o=(i.get("minShowLabelAngle")||0)*Vn,l=e.getLayout("viewRect"),s=e.getLayout("r"),u=l.width,h=l.x,c=l.y,v=l.height;function f(A){A.ignore=!0}function d(A){if(!A.ignore)return!0;for(var S in A.states)if(A.states[S].ignore===!1)return!0;return!1}e.each(function(A){var S=e.getItemGraphicEl(A),w=S.shape,L=S.getTextContent(),D=S.getTextGuideLine(),C=e.getItemModel(A),M=C.getModel("label"),I=M.get("position")||C.get(["emphasis","label","position"]),k=M.get("distanceToLabelLine"),P=M.get("alignTo"),Z=K(M.get("edgeDistance"),u),Y=M.get("bleedMargin"),R=C.getModel("labelLine"),B=R.get("length");B=K(B,u);var G=R.get("length2");if(G=K(G,u),Math.abs(w.endAngle-w.startAngle)<o){T(L.states,f),L.ignore=!0,D&&(T(D.states,f),D.ignore=!0);return}if(d(L)){var E=(w.startAngle+w.endAngle)/2,N=Math.cos(E),ot=Math.sin(E),Dt,Wt,We,Ft;r=w.cx,a=w.cy;var gt=I==="inside"||I==="inner";if(I==="center")Dt=w.cx,Wt=w.cy,Ft="center";else{var ae=(gt?(w.r+w.r0)/2*N:w.r*N)+r,ne=(gt?(w.r+w.r0)/2*ot:w.r*ot)+a;if(Dt=ae+N*3,Wt=ne+ot*3,!gt){var Fe=ae+N*(B+s-w.r),Ye=ne+ot*(B+s-w.r),Xe=Fe+(N<0?-1:1)*G,Ze=Ye;P==="edge"?Dt=N<0?h+Z:h+u-Z:Dt=Xe+(N<0?-k:k),Wt=Ze,We=[[ae,ne],[Fe,Ye],[Xe,Ze]]}Ft=gt?"center":P==="edge"?N>0?"right":"left":N>0?"left":"right"}var Pt=Math.PI,pt=0,Mt=M.get("rotate");if(Ht(Mt))pt=Mt*(Pt/180);else if(I==="center")pt=0;else if(Mt==="radial"||Mt===!0){var Yi=N<0?-E+Pt:-E;pt=Yi}else if(Mt==="tangential"&&I!=="outside"&&I!=="outer"){var yt=Math.atan2(N,ot);yt<0&&(yt=Pt*2+yt);var Xi=ot>0;Xi&&(yt=Pt+yt),pt=yt-Pt}if(n=!!pt,L.x=Dt,L.y=Wt,L.rotation=pt,L.setStyle({verticalAlign:"middle"}),gt){L.setStyle({align:Ft});var oe=L.states.select;oe&&(oe.x+=L.x,oe.y+=L.y)}else{var kt=L.getBoundingRect().clone();kt.applyTransform(L.getComputedTransform());var Ue=(L.style.margin||0)+2.1;kt.y-=Ue/2,kt.height+=Ue,t.push({label:L,labelLine:D,position:I,len:B,len2:G,minTurnAngle:R.get("minTurnAngle"),maxSurfaceAngle:R.get("maxSurfaceAngle"),surfaceNormal:new je(N,ot),linePoints:We,textAlign:Ft,labelDistance:k,labelAlignTo:P,edgeDistance:Z,bleedMargin:Y,rect:kt,unconstrainedWidth:kt.width,labelStyleWidth:L.style.width})}S.setTextConfig({inside:gt})}}),!n&&i.get("avoidLabelOverlap")&&Hn(t,r,a,s,u,v,h,c);for(var g=0;g<t.length;g++){var p=t[g],y=p.label,x=p.labelLine,m=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:p.textAlign}),m&&(T(y.states,f),y.ignore=!0);var _=y.states.select;_&&(_.x+=y.x,_.y+=y.y)}if(x){var b=p.linePoints;m||!b?(T(x.states,f),x.ignore=!0):(ca(b,p.minTurnAngle),va(b,p.surfaceNormal,p.maxSurfaceAngle),x.setShape({points:b}),y.__hostTarget.textGuideLineConfig={anchor:new je(b[0][0],b[0][1])})}}}var Fn=function(i){O(e,i);function e(t,r,a){var n=i.call(this)||this;n.z2=2;var o=new q;return n.setTextContent(o),n.updateData(t,r,a,!0),n}return e.prototype.updateData=function(t,r,a,n){var o=this,l=t.hostModel,s=t.getItemModel(r),u=s.getModel("emphasis"),h=t.getItemLayout(r),c=V(Bt(s.getModel("itemStyle"),h,!0),h);if(isNaN(c.startAngle)){o.setShape(c);return}if(n){o.setShape(c);var v=l.getShallow("animationType");l.ecModel.ssr?(vt(o,{scaleX:0,scaleY:0},l,{dataIndex:r,isFrom:!0}),o.originX=c.cx,o.originY=c.cy):v==="scale"?(o.shape.r=h.r0,vt(o,{shape:{r:h.r}},l,r)):a!=null?(o.setShape({startAngle:a,endAngle:a}),vt(o,{shape:{startAngle:h.startAngle,endAngle:h.endAngle}},l,r)):(o.shape.endAngle=h.startAngle,et(o,{shape:{endAngle:h.endAngle}},l,r))}else ri(o),et(o,{shape:c},l,r);o.useStyle(t.getItemVisual(r,"style")),oi(o,s);var f=(h.startAngle+h.endAngle)/2,d=l.get("selectedOffset"),g=Math.cos(f)*d,p=Math.sin(f)*d,y=s.getShallow("cursor");y&&o.attr("cursor",y),this._updateLabel(l,t,r),o.ensureState("emphasis").shape=V({r:h.r+(u.get("scale")&&u.get("scaleSize")||0)},Bt(u.getModel("itemStyle"),h)),V(o.ensureState("select"),{x:g,y:p,shape:Bt(s.getModel(["select","itemStyle"]),h)}),V(o.ensureState("blur"),{shape:Bt(s.getModel(["blur","itemStyle"]),h)});var x=o.getTextGuideLine(),m=o.getTextContent();x&&V(x.ensureState("select"),{x:g,y:p}),V(m.ensureState("select"),{x:g,y:p}),ni(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r,a){var n=this,o=r.getItemModel(a),l=o.getModel("labelLine"),s=r.getItemVisual(a,"style"),u=s&&s.fill,h=s&&s.opacity;Ee(n,ai(o),{labelFetcher:r.hostModel,labelDataIndex:a,inheritColor:u,defaultOpacity:h,defaultText:t.getFormattedLabel(a,"normal")||r.getName(a)});var c=n.getTextContent();n.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var v=t.get(["label","position"]);if(v!=="outside"&&v!=="outer")n.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new da,this.setTextGuideLine(f)),ga(this,ya(o),{stroke:u,opacity:pa(l.get(["lineStyle","opacity"]),h,1)})}},e}(Vt),Yn=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,a,n){var o=t.getData(),l=this._data,s=this.group,u;if(!l&&o.count()>0){for(var h=o.getItemLayout(0),c=1;isNaN(h&&h.startAngle)&&c<o.count();++c)h=o.getItemLayout(c);h&&(u=h.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var v=Ai(t),f=new Vt({shape:V(Si(t,a),v)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,s.add(f)}o.diff(l).add(function(d){var g=new Fn(o,d,u);o.setItemGraphicEl(d,g),s.add(g)}).update(function(d,g){var p=l.getItemGraphicEl(g);p.updateData(o,d,u),p.off("click"),s.add(p),o.setItemGraphicEl(d,p)}).remove(function(d){var g=l.getItemGraphicEl(d);be(g,t,d)}).execute(),Wn(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var a=r.getData(),n=a.getItemLayout(0);if(n){var o=t[0]-n.cx,l=t[1]-n.cy,s=Math.sqrt(o*o+l*l);return s<=n.r&&s>=n.r0}},e.type="pie",e}(ii);function Xn(i,e,t){e=z(e)&&{coordDimensions:e}||V({encodeDefine:i.getEncode()},e);var r=i.getSource(),a=ma(r,e).dimensions,n=new xa(a,i);return n.initData(r,t),n}var Zn=function(){function i(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return i.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},i.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},i.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},i.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},i}(),Un=Tt(),$n=function(i){O(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.init=function(t){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Zn(j(this.getData,this),j(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){i.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Xn(this,{coordDimensions:["value"],encodeDefaulter:H(_a,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),a=Un(r),n=a.seats;if(!n){var o=[];r.each(r.mapDimension("value"),function(s){o.push(s)}),n=a.seats=ba(o,r.hostModel.get("percentPrecision"))}var l=i.prototype.getDataParams.call(this,t);return l.percent=n[t]||0,l.$vars.push("percent"),l},e.prototype._defaultLabelLine=function(t){wa(t,"labelLine",["show"]);var r=t.labelLine,a=t.emphasis.labelLine;r.show=r.show&&t.label.show,a.show=a.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Be);function Kn(i){return{seriesType:i,reset:function(e,t){var r=e.getData();r.filterSelf(function(a){var n=r.mapDimension("value"),o=r.get(n,a);return!(Ht(o)&&!isNaN(o)&&o<0)})}}}function ks(i){i.registerChartView(Yn),i.registerSeriesModel($n),Sa("pie",i.registerAction),i.registerLayout(H(Nn,"pie")),i.registerProcessor(zn("pie")),i.registerProcessor(Kn("pie"))}var jn=function(i){O(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Lt),Ce=function(i){O(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Qt).models[0]},e.type="cartesian2dAxis",e}(Lt);Aa(Ce,Ca);var Ti={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},qn=$({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Ti),ze=$({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Ti),Jn=$({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},ze),Qn=J({logBase:10},ze);const to={category:qn,value:ze,time:Jn,log:Qn};var eo={value:1,category:1,time:1,log:1};function _r(i,e,t,r){T(eo,function(a,n){var o=$($({},to[n],!0),r,!0),l=function(s){O(u,s);function u(){var h=s!==null&&s.apply(this,arguments)||this;return h.type=e+"Axis."+n,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var v=Ta(this),f=v?si(h):{},d=c.getTheme();$(h,d.get(n+"Axis")),$(h,this.getDefaultOption()),h.type=br(h),v&&li(h,f,v)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=La.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=e+"Axis."+n,u.defaultOption=o,u}(t);i.registerComponentModel(l)}),i.registerSubTypeDefaulter(e+"Axis",br)}function br(i){return i.type||(i.data?"category":"value")}var ro=function(){function i(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return i.prototype.getAxis=function(e){return this._axes[e]},i.prototype.getAxes=function(){return Ct(this._dimList,function(e){return this._axes[e]},this)},i.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),ui(this.getAxes(),function(t){return t.scale.type===e})},i.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},i}(),Te=["x","y"];function wr(i){return i.type==="interval"||i.type==="time"}var io=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=Te,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!wr(t)||!wr(r))){var a=t.getExtent(),n=r.getExtent(),o=this.dataToPoint([a[0],n[0]]),l=this.dataToPoint([a[1],n[1]]),s=a[1]-a[0],u=n[1]-n[0];if(!(!s||!u)){var h=(l[0]-o[0])/s,c=(l[1]-o[1])/u,v=o[0]-a[0]*h,f=o[1]-n[0]*c,d=this._transform=[h,0,0,c,v,f];this._invTransform=Ia([],d)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),a=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&a.contain(a.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var a=this.dataToPoint(t),n=this.dataToPoint(r),o=this.getArea(),l=new xt(a[0],a[1],n[0]-a[0],n[1]-a[1]);return o.intersect(l)},e.prototype.dataToPoint=function(t,r,a){a=a||[];var n=t[0],o=t[1];if(this._transform&&n!=null&&isFinite(n)&&o!=null&&isFinite(o))return wt(a,t,this._transform);var l=this.getAxis("x"),s=this.getAxis("y");return a[0]=l.toGlobalCoord(l.dataToCoord(n,r)),a[1]=s.toGlobalCoord(s.dataToCoord(o,r)),a},e.prototype.clampData=function(t,r){var a=this.getAxis("x").scale,n=this.getAxis("y").scale,o=a.getExtent(),l=n.getExtent(),s=a.parse(t[0]),u=n.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(l[0],l[1]),u),Math.max(l[0],l[1])),r},e.prototype.pointToData=function(t,r){var a=[];if(this._invTransform)return wt(a,t,this._invTransform);var n=this.getAxis("x"),o=this.getAxis("y");return a[0]=n.coordToData(n.toLocalCoord(t[0]),r),a[1]=o.coordToData(o.toLocalCoord(t[1]),r),a},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),a=this.getAxis("y").getGlobalExtent(),n=Math.min(r[0],r[1])-t,o=Math.min(a[0],a[1])-t,l=Math.max(r[0],r[1])-n+t,s=Math.max(a[0],a[1])-o+t;return new xt(n,o,l,s)},e}(ro),ao=function(i){O(e,i);function e(t,r,a,n,o){var l=i.call(this,t,r,a)||this;return l.index=0,l.type=n||"value",l.position=o||"bottom",l}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(Da);function Le(i,e,t){t=t||{};var r=i.coordinateSystem,a=e.axis,n={},o=a.getAxesOnZeroOf()[0],l=a.position,s=o?"onZero":l,u=a.dim,h=r.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],v={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,d=u==="x"?[c[2]-f,c[3]+f]:[c[0]-f,c[1]+f];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));d[v.onZero]=Math.max(Math.min(g,d[1]),d[0])}n.position=[u==="y"?d[v[s]]:c[0],u==="x"?d[v[s]]:c[3]],n.rotation=Math.PI/2*(u==="x"?0:1);var p={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=p[l],n.labelOffset=o?d[v[l]]-d[v.onZero]:0,e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),Gt(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var y=e.get(["axisLabel","rotate"]);return n.labelRotate=s==="top"?-y:y,n.z2=1,n}function Sr(i){return i.get("coordinateSystem")==="cartesian2d"}function Ar(i){var e={xAxisModel:null,yAxisModel:null};return T(e,function(t,r){var a=r.replace(/Model$/,""),n=i.getReferringComponents(a,Qt).models[0];e[r]=n}),e}var fe=Math.log;function no(i,e,t){var r=Pa.prototype,a=r.getTicks.call(t),n=r.getTicks.call(t,!0),o=a.length-1,l=r.getInterval.call(t),s=Ma(i,e),u=s.extent,h=s.fixMin,c=s.fixMax;if(i.type==="log"){var v=fe(i.base);u=[fe(u[0])/v,fe(u[1])/v]}i.setExtent(u[0],u[1]),i.calcNiceExtent({splitNumber:o,fixMin:h,fixMax:c});var f=r.getExtent.call(i);h&&(u[0]=f[0]),c&&(u[1]=f[1]);var d=r.getInterval.call(i),g=u[0],p=u[1];if(h&&c)d=(p-g)/o;else if(h)for(p=u[0]+d*o;p<u[1]&&isFinite(p)&&isFinite(u[1]);)d=se(d),p=u[0]+d*o;else if(c)for(g=u[1]-d*o;g>u[0]&&isFinite(g)&&isFinite(u[0]);)d=se(d),g=u[1]-d*o;else{var y=i.getTicks().length-1;y>o&&(d=se(d));var x=d*o;p=Math.ceil(u[1]/d)*d,g=ut(p-x),g<0&&u[0]>=0?(g=0,p=ut(x)):p>0&&u[1]<=0&&(p=0,g=-ut(x))}var m=(a[0].value-n[0].value)/l,_=(a[o].value-n[o].value)/l;r.setExtent.call(i,g+d*m,p+d*_),r.setInterval.call(i,d),(m||_)&&r.setNiceExtent.call(i,g+d,p-d)}var oo=function(){function i(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Te,this._initCartesian(e,t,r),this.model=e}return i.prototype.getRect=function(){return this._rect},i.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function a(o){var l,s=Ba(o),u=s.length;if(u){for(var h=[],c=u-1;c>=0;c--){var v=+s[c],f=o[v],d=f.model,g=f.scale;we(g)&&d.get("alignTicks")&&d.get("interval")==null?h.push(f):(qe(g,d),we(g)&&(l=f))}h.length&&(l||(l=h.pop(),qe(l.scale,l.model)),T(h,function(p){no(p.scale,p.model,l.scale)}))}}a(r.x),a(r.y);var n={};T(r.x,function(o){Cr(r,"y",o,n)}),T(r.y,function(o){Cr(r,"x",o,n)}),this.resize(this.model,t)},i.prototype.resize=function(e,t,r){var a=e.getBoxLayoutParams(),n=!r&&e.get("containLabel"),o=bt(a,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var l=this._axesList;s(),n&&(T(l,function(u){if(!u.model.get(["axisLabel","inside"])){var h=ka(u);if(h){var c=u.isHorizontal()?"height":"width",v=u.model.get(["axisLabel","margin"]);o[c]-=h[c]+v,u.position==="top"?o.y+=h.height+v:u.position==="left"&&(o.x+=h.width+v)}}}),s()),T(this._coordsList,function(u){u.calcAffineTransform()});function s(){T(l,function(u){var h=u.isHorizontal(),c=h?[0,o.width]:[0,o.height],v=u.inverse?1:0;u.setExtent(c[v],c[1-v]),so(u,h?o.x:o.y)})}},i.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},i.prototype.getAxes=function(){return this._axesList.slice()},i.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}ft(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var a=0,n=this._coordsList;a<n.length;a++)if(n[a].getAxis("x").index===e||n[a].getAxis("y").index===t)return n[a]},i.prototype.getCartesians=function(){return this._coordsList.slice()},i.prototype.convertToPixel=function(e,t,r){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.dataToPoint(r):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(r)):null},i.prototype.convertFromPixel=function(e,t,r){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.pointToData(r):a.axis?a.axis.coordToData(a.axis.toLocalCoord(r)):null},i.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Qt).models[0],a=e.yAxisModel||t&&t.getReferringComponents("yAxis",Qt).models[0],n=e.gridModel,o=this._coordsList,l,s;if(t)l=t.coordinateSystem,ct(o,l)<0&&(l=null);else if(r&&a)l=this.getCartesian(r.componentIndex,a.componentIndex);else if(r)s=this.getAxis("x",r.componentIndex);else if(a)s=this.getAxis("y",a.componentIndex);else if(n){var u=n.coordinateSystem;u===this&&(l=this._coordsList[0])}return{cartesian:l,axis:s}},i.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},i.prototype._initCartesian=function(e,t,r){var a=this,n=this,o={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},s={x:0,y:0};if(t.eachComponent("xAxis",u("x"),this),t.eachComponent("yAxis",u("y"),this),!s.x||!s.y){this._axesMap={},this._axesList=[];return}this._axesMap=l,T(l.x,function(h,c){T(l.y,function(v,f){var d="x"+c+"y"+f,g=new io(d);g.master=a,g.model=e,a._coordsMap[d]=g,a._coordsList.push(g),g.addAxis(h),g.addAxis(v)})});function u(h){return function(c,v){if(de(c,e)){var f=c.get("position");h==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var d=new ao(h,Ra(c),[0,0],c.get("type"),f),g=d.type==="category";d.onBand=g&&c.get("boundaryGap"),d.inverse=c.get("inverse"),c.axis=d,d.model=c,d.grid=n,d.index=v,n._axesList.push(d),l[h][v]=d,s[h]++}}}},i.prototype._updateScale=function(e,t){T(this._axesList,function(a){if(a.scale.setExtent(1/0,-1/0),a.type==="category"){var n=a.model.get("categorySortInfo");a.scale.setSortInfo(n)}}),e.eachSeries(function(a){if(Sr(a)){var n=Ar(a),o=n.xAxisModel,l=n.yAxisModel;if(!de(o,t)||!de(l,t))return;var s=this.getCartesian(o.componentIndex,l.componentIndex),u=a.getData(),h=s.getAxis("x"),c=s.getAxis("y");r(u,h),r(u,c)}},this);function r(a,n){T(Oa(a,n.dim),function(o){n.scale.unionExtentFromData(a,o)})}},i.prototype.getTooltipAxes=function(e){var t=[],r=[];return T(this.getCartesians(),function(a){var n=e!=null&&e!=="auto"?a.getAxis(e):a.getBaseAxis(),o=a.getOtherAxis(n);ct(t,n)<0&&t.push(n),ct(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},i.create=function(e,t){var r=[];return e.eachComponent("grid",function(a,n){var o=new i(a,e,t);o.name="grid_"+n,o.resize(a,t,!0),a.coordinateSystem=o,r.push(o)}),e.eachSeries(function(a){if(Sr(a)){var n=Ar(a),o=n.xAxisModel,l=n.yAxisModel,s=o.getCoordSysModel(),u=s.coordinateSystem;a.coordinateSystem=u.getCartesian(o.componentIndex,l.componentIndex)}}),r},i.dimensions=Te,i}();function de(i,e){return i.getCoordSysModel()===e}function Cr(i,e,t,r){t.getAxesOnZeroOf=function(){return n?[n]:[]};var a=i[e],n,o=t.model,l=o.get(["axisLine","onZero"]),s=o.get(["axisLine","onZeroAxisIndex"]);if(!l)return;if(s!=null)Tr(a[s])&&(n=a[s]);else for(var u in a)if(a.hasOwnProperty(u)&&Tr(a[u])&&!r[h(a[u])]){n=a[u];break}n&&(r[h(n)]=!0);function h(c){return c.dim+"_"+c.index}}function Tr(i){return i&&i.type!=="category"&&i.type!=="time"&&Ea(i)}function so(i,e){var t=i.getExtent(),r=t[0]+t[1];i.toGlobalCoord=i.dim==="x"?function(a){return a+e}:function(a){return r-a+e},i.toLocalCoord=i.dim==="x"?function(a){return a-e}:function(a){return r-a+e}}var it=Math.PI,at=function(){function i(e,t){this.group=new dt,this.opt=t,this.axisModel=e,J(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new dt({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return i.prototype.hasBuilder=function(e){return!!Lr[e]},i.prototype.add=function(e){Lr[e](this.opt,this.axisModel,this.group,this._transformGroup)},i.prototype.getGroup=function(){return this.group},i.innerTextLayout=function(e,t,r){var a=hi(t-e),n,o;return re(a)?(o=r>0?"top":"bottom",n="center"):re(a-it)?(o=r>0?"bottom":"top",n="center"):(o="middle",a>0&&a<it?n=r>0?"right":"left":n=r>0?"left":"right"),{rotation:a,textAlign:n,textVerticalAlign:o}},i.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},i.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},i}(),Lr={axisLine:function(i,e,t,r){var a=e.get(["axisLine","show"]);if(a==="auto"&&i.handleAutoShown&&(a=i.handleAutoShown("axisLine")),!!a){var n=e.axis.getExtent(),o=r.transform,l=[n[0],0],s=[n[1],0],u=l[0]>s[0];o&&(wt(l,l,o),wt(s,s,o));var h=V({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new te({shape:{x1:l[0],y1:l[1],x2:s[0],y2:s[1]},style:h,strokeContainThreshold:i.strokeContainThreshold||5,silent:!0,z2:1});ee(c.shape,c.style.lineWidth),c.anid="line",t.add(c);var v=e.get(["axisLine","symbol"]);if(v!=null){var f=e.get(["axisLine","symbolSize"]);F(v)&&(v=[v,v]),(F(f)||Ht(f))&&(f=[f,f]);var d=za(e.get(["axisLine","symbolOffset"])||0,f),g=f[0],p=f[1];T([{rotate:i.rotation+Math.PI/2,offset:d[0],r:0},{rotate:i.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((l[0]-s[0])*(l[0]-s[0])+(l[1]-s[1])*(l[1]-s[1]))}],function(y,x){if(v[x]!=="none"&&v[x]!=null){var m=vi(v[x],-g/2,-p/2,g,p,h.stroke,!0),_=y.r+y.offset,b=u?s:l;m.attr({rotation:y.rotate,x:b[0]+_*Math.cos(i.rotation),y:b[1]-_*Math.sin(i.rotation),silent:!0,z2:11}),t.add(m)}})}}},axisTickLabel:function(i,e,t,r){var a=ho(t,r,e,i),n=vo(t,r,e,i);if(uo(e,n,a),co(t,r,e,i.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=Ga(Ct(n,function(l){return{label:l,priority:l.z2,defaultAttr:{ignore:l.ignore}}}));Na(o)}},axisName:function(i,e,t,r){var a=Gt(i.axisName,e.get("name"));if(a){var n=e.get("nameLocation"),o=i.nameDirection,l=e.getModel("nameTextStyle"),s=e.get("nameGap")||0,u=e.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[n==="start"?u[0]-h*s:n==="end"?u[1]+h*s:(u[0]+u[1])/2,Dr(n)?i.labelOffset+o*s:0],v,f=e.get("nameRotate");f!=null&&(f=f*it/180);var d;Dr(n)?v=at.innerTextLayout(i.rotation,f??i.rotation,o):(v=lo(i.rotation,n,f||0,u),d=i.axisNameAvailableWidth,d!=null&&(d=Math.abs(d/Math.sin(v.rotation)),!isFinite(d)&&(d=null)));var g=l.getFont(),p=e.get("nameTruncate",!0)||{},y=p.ellipsis,x=Gt(i.nameTruncateMaxWidth,p.maxWidth,d),m=new q({x:c[0],y:c[1],rotation:v.rotation,silent:at.isLabelSilent(e),style:St(l,{text:a,font:g,overflow:"truncate",width:x,ellipsis:y,fill:l.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:l.get("align")||v.textAlign,verticalAlign:l.get("verticalAlign")||v.textVerticalAlign}),z2:1});if(ci({el:m,componentModel:e,itemName:a}),m.__fullText=a,m.anid="name",e.get("triggerEvent")){var _=at.makeAxisEventDataBase(e);_.targetType="axisName",_.name=a,W(m).eventData=_}r.add(m),m.updateTransform(),t.add(m),m.decomposeTransform()}}};function lo(i,e,t,r){var a=hi(t-i),n,o,l=r[0]>r[1],s=e==="start"&&!l||e!=="start"&&l;return re(a-it/2)?(o=s?"bottom":"top",n="center"):re(a-it*1.5)?(o=s?"top":"bottom",n="center"):(o="middle",a<it*1.5&&a>it/2?n=s?"left":"right":n=s?"right":"left"),{rotation:a,textAlign:n,textVerticalAlign:o}}function uo(i,e,t){if(!Va(i.axis)){var r=i.get(["axisLabel","showMinLabel"]),a=i.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var n=e[0],o=e[1],l=e[e.length-1],s=e[e.length-2],u=t[0],h=t[1],c=t[t.length-1],v=t[t.length-2];r===!1?(U(n),U(u)):Ir(n,o)&&(r?(U(o),U(h)):(U(n),U(u))),a===!1?(U(l),U(c)):Ir(s,l)&&(a?(U(s),U(v)):(U(l),U(c)))}}function U(i){i&&(i.ignore=!0)}function Ir(i,e){var t=i&&i.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var a=Ha([]);return fi(a,a,-i.rotation),t.applyTransform(Je([],a,i.getLocalTransform())),r.applyTransform(Je([],a,e.getLocalTransform())),t.intersect(r)}}function Dr(i){return i==="middle"||i==="center"}function Li(i,e,t,r,a){for(var n=[],o=[],l=[],s=0;s<i.length;s++){var u=i[s].coord;o[0]=u,o[1]=0,l[0]=u,l[1]=t,e&&(wt(o,o,e),wt(l,l,e));var h=new te({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:r,z2:2,autoBatch:!0,silent:!0});ee(h.shape,h.style.lineWidth),h.anid=a+"_"+i[s].tickValue,n.push(h)}return n}function ho(i,e,t,r){var a=t.axis,n=t.getModel("axisTick"),o=n.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||a.scale.isBlank())){for(var l=n.getModel("lineStyle"),s=r.tickDirection*n.get("length"),u=a.getTicksCoords(),h=Li(u,e.transform,s,J(l.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)i.add(h[c]);return h}}function co(i,e,t,r){var a=t.axis,n=t.getModel("minorTick");if(!(!n.get("show")||a.scale.isBlank())){var o=a.getMinorTicksCoords();if(o.length)for(var l=n.getModel("lineStyle"),s=r*n.get("length"),u=J(l.getLineStyle(),J(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var c=Li(o[h],e.transform,s,u,"minorticks_"+h),v=0;v<c.length;v++)i.add(c[v])}}function vo(i,e,t,r){var a=t.axis,n=Gt(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!n||a.scale.isBlank())){var o=t.getModel("axisLabel"),l=o.get("margin"),s=a.getViewLabels(),u=(Gt(r.labelRotate,o.get("rotate"))||0)*it/180,h=at.innerTextLayout(r.rotation,u,r.labelDirection),c=t.getCategories&&t.getCategories(!0),v=[],f=at.isLabelSilent(t),d=t.get("triggerEvent");return T(s,function(g,p){var y=a.scale.type==="ordinal"?a.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,x=g.formattedLabel,m=g.rawLabel,_=o;if(c&&c[y]){var b=c[y];ft(b)&&b.textStyle&&(_=new ht(b.textStyle,o,t.ecModel))}var A=_.getTextColor()||t.get(["axisLine","lineStyle","color"]),S=a.dataToCoord(y),w=_.getShallow("align",!0)||h.textAlign,L=_t(_.getShallow("alignMinLabel",!0),w),D=_t(_.getShallow("alignMaxLabel",!0),w),C=_.getShallow("verticalAlign",!0)||_.getShallow("baseline",!0)||h.textVerticalAlign,M=_t(_.getShallow("verticalAlignMinLabel",!0),C),I=_t(_.getShallow("verticalAlignMaxLabel",!0),C),k=new q({x:S,y:r.labelOffset+r.labelDirection*l,rotation:h.rotation,silent:f,z2:10+(g.level||0),style:St(_,{text:x,align:p===0?L:p===s.length-1?D:w,verticalAlign:p===0?M:p===s.length-1?I:C,fill:nt(A)?A(a.type==="category"?m:a.type==="value"?y+"":y,p):A})});if(k.anid="label_"+y,d){var P=at.makeAxisEventDataBase(t);P.targetType="axisLabel",P.value=m,P.tickIndex=p,a.type==="category"&&(P.dataIndex=y),W(k).eventData=P}e.add(k),k.updateTransform(),v.push(k),i.add(k),k.decomposeTransform()}),v}}function fo(i,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return go(t,i,e),t.seriesInvolved&&yo(t,i),t}function go(i,e,t){var r=e.getComponent("tooltip"),a=e.getComponent("axisPointer"),n=a.get("link",!0)||[],o=[];T(t.getCoordinateSystems(),function(l){if(!l.axisPointerEnabled)return;var s=zt(l.model),u=i.coordSysAxesInfo[s]={};i.coordSysMap[s]=l;var h=l.model,c=h.getModel("tooltip",r);if(T(l.getAxes(),H(g,!1,null)),l.getTooltipAxes&&r&&c.get("show")){var v=c.get("trigger")==="axis",f=c.get(["axisPointer","type"])==="cross",d=l.getTooltipAxes(c.get(["axisPointer","axis"]));(v||f)&&T(d.baseAxes,H(g,f?"cross":!0,v)),f&&T(d.otherAxes,H(g,"cross",!1))}function g(p,y,x){var m=x.model.getModel("axisPointer",a),_=m.get("show");if(!(!_||_==="auto"&&!p&&!Ie(m))){y==null&&(y=m.get("triggerTooltip")),m=p?po(x,c,a,e,p,y):m;var b=m.get("snap"),A=m.get("triggerEmphasis"),S=zt(x.model),w=y||b||x.type==="category",L=i.axesInfo[S]={key:S,axis:x,coordSys:l,axisPointerModel:m,triggerTooltip:y,triggerEmphasis:A,involveSeries:w,snap:b,useHandle:Ie(m),seriesModels:[],linkGroup:null};u[S]=L,i.seriesInvolved=i.seriesInvolved||w;var D=mo(n,x);if(D!=null){var C=o[D]||(o[D]={axesInfo:{}});C.axesInfo[S]=L,C.mapper=n[D].mapper,L.linkGroup=C}}}})}function po(i,e,t,r,a,n){var o=e.getModel("axisPointer"),l=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],s={};T(l,function(v){s[v]=Nt(o.get(v))}),s.snap=i.type!=="category"&&!!n,o.get("type")==="cross"&&(s.type="line");var u=s.label||(s.label={});if(u.show==null&&(u.show=!1),a==="cross"){var h=o.get(["label","show"]);if(u.show=h??!0,!n){var c=s.lineStyle=o.get("crossStyle");c&&J(u,c.textStyle)}}return i.model.getModel("axisPointer",new ht(s,t,r))}function yo(i,e){e.eachSeries(function(t){var r=t.coordinateSystem,a=t.get(["tooltip","trigger"],!0),n=t.get(["tooltip","show"],!0);!r||a==="none"||a===!1||a==="item"||n===!1||t.get(["axisPointer","show"],!0)===!1||T(i.coordSysAxesInfo[zt(r.model)],function(o){var l=o.axis;r.getAxis(l.dim)===l&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function mo(i,e){for(var t=e.model,r=e.dim,a=0;a<i.length;a++){var n=i[a]||{};if(ge(n[r+"AxisId"],t.id)||ge(n[r+"AxisIndex"],t.componentIndex)||ge(n[r+"AxisName"],t.name))return a}}function ge(i,e){return i==="all"||z(i)&&ct(i,e)>=0||i===e}function xo(i){var e=Ve(i);if(e){var t=e.axisPointerModel,r=e.axis.scale,a=t.option,n=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var l=Ie(t);n==null&&(a.status=l?"show":"hide");var s=r.getExtent().slice();s[0]>s[1]&&s.reverse(),(o==null||o>s[1])&&(o=s[1]),o<s[0]&&(o=s[0]),a.value=o,l&&(a.status=e.axis.scale.isBlank()?"hide":"show")}}function Ve(i){var e=(i.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[zt(i)]}function _o(i){var e=Ve(i);return e&&e.axisPointerModel}function Ie(i){return!!i.get(["handle","show"])}function zt(i){return i.type+"||"+i.id}var Pr={},Ii=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,a,n){this.axisPointerClass&&xo(t),i.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,a,!0)},e.prototype.updateAxisPointer=function(t,r,a,n){this._doUpdateAxisPointerClass(t,a,!1)},e.prototype.remove=function(t,r){var a=this._axisPointer;a&&a.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),i.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,a){var n=e.getAxisPointerClass(this.axisPointerClass);if(n){var o=_o(t);o?(this._axisPointer||(this._axisPointer=new n)).render(t,o,r,a):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){Pr[t]=r},e.getAxisPointerClass=function(t){return t&&Pr[t]},e.type="axis",e}(It),De=Tt();function bo(i,e,t,r){var a=t.axis;if(!a.scale.isBlank()){var n=t.getModel("splitArea"),o=n.getModel("areaStyle"),l=o.get("color"),s=r.coordinateSystem.getRect(),u=a.getTicksCoords({tickModel:n,clamp:!0});if(u.length){var h=l.length,c=De(i).splitAreaColors,v=Ge(),f=0;if(c)for(var d=0;d<u.length;d++){var g=c.get(u[d].tickValue);if(g!=null){f=(g+(h-1)*d)%h;break}}var p=a.toGlobalCoord(u[0].coord),y=o.getAreaStyle();l=z(l)?l:[l];for(var d=1;d<u.length;d++){var x=a.toGlobalCoord(u[d].coord),m=void 0,_=void 0,b=void 0,A=void 0;a.isHorizontal()?(m=p,_=s.y,b=x-m,A=s.height,p=m+b):(m=s.x,_=p,b=s.width,A=x-_,p=_+A);var S=u[d-1].tickValue;S!=null&&v.set(S,f),e.add(new Q({anid:S!=null?"area_"+S:null,shape:{x:m,y:_,width:b,height:A},style:J({fill:l[f]},y),autoBatch:!0,silent:!0})),f=(f+1)%h}De(i).splitAreaColors=v}}}function wo(i){De(i).splitAreaColors=null}var So=["axisLine","axisTickLabel","axisName"],Ao=["splitArea","splitLine","minorSplitLine"],Di=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,a,n){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new dt,this.group.add(this._axisGroup),!!t.get("show")){var l=t.getCoordSysModel(),s=Le(l,t),u=new at(t,V({handleAutoShown:function(c){for(var v=l.coordinateSystem.getCartesians(),f=0;f<v.length;f++)if(we(v[f].getOtherAxis(t.axis).scale))return!0;return!1}},s));T(So,u.add,u),this._axisGroup.add(u.getGroup()),T(Ao,function(c){t.get([c,"show"])&&Co[c](this,this._axisGroup,t,l)},this);var h=n&&n.type==="changeAxisOrder"&&n.isInitSort;h||Wa(o,this._axisGroup,t),i.prototype.render.call(this,t,r,a,n)}},e.prototype.remove=function(){wo(this)},e.type="cartesianAxis",e}(Ii),Co={splitLine:function(i,e,t,r){var a=t.axis;if(!a.scale.isBlank()){var n=t.getModel("splitLine"),o=n.getModel("lineStyle"),l=o.get("color");l=z(l)?l:[l];for(var s=r.coordinateSystem.getRect(),u=a.isHorizontal(),h=0,c=a.getTicksCoords({tickModel:n}),v=[],f=[],d=o.getLineStyle(),g=0;g<c.length;g++){var p=a.toGlobalCoord(c[g].coord);u?(v[0]=p,v[1]=s.y,f[0]=p,f[1]=s.y+s.height):(v[0]=s.x,v[1]=p,f[0]=s.x+s.width,f[1]=p);var y=h++%l.length,x=c[g].tickValue,m=new te({anid:x!=null?"line_"+c[g].tickValue:null,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:f[0],y2:f[1]},style:J({stroke:l[y]},d),silent:!0});ee(m.shape,d.lineWidth),e.add(m)}}},minorSplitLine:function(i,e,t,r){var a=t.axis,n=t.getModel("minorSplitLine"),o=n.getModel("lineStyle"),l=r.coordinateSystem.getRect(),s=a.isHorizontal(),u=a.getMinorTicksCoords();if(u.length)for(var h=[],c=[],v=o.getLineStyle(),f=0;f<u.length;f++)for(var d=0;d<u[f].length;d++){var g=a.toGlobalCoord(u[f][d].coord);s?(h[0]=g,h[1]=l.y,c[0]=g,c[1]=l.y+l.height):(h[0]=l.x,h[1]=g,c[0]=l.x+l.width,c[1]=g);var p=new te({anid:"minor_line_"+u[f][d].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:v,silent:!0});ee(p.shape,v.lineWidth),e.add(p)}},splitArea:function(i,e,t,r){bo(i,e,t,r)}},Pi=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(Di),To=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=Pi.type,t}return e.type="yAxis",e}(Di),Lo=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new Q({shape:t.coordinateSystem.getRect(),style:J({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(It),Mr={offset:0};function Io(i){i.registerComponentView(Lo),i.registerComponentModel(jn),i.registerCoordinateSystem("cartesian2d",oo),_r(i,"x",Ce,Mr),_r(i,"y",Ce,Mr),i.registerComponentView(Pi),i.registerComponentView(To),i.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var lt=Tt(),kr=Nt,pe=j,Do=function(){function i(){this._dragging=!1,this.animationThreshold=15}return i.prototype.render=function(e,t,r,a){var n=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!a&&this._lastValue===n&&this._lastStatus===o)){this._lastValue=n,this._lastStatus=o;var l=this._group,s=this._handle;if(!o||o==="hide"){l&&l.hide(),s&&s.hide();return}l&&l.show(),s&&s.show();var u={};this.makeElOption(u,n,e,t,r);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(e,t);if(!l)l=this._group=new dt,this.createPointerEl(l,u,e,t),this.createLabelEl(l,u,e,t),r.getZr().add(l);else{var v=H(Rr,t,c);this.updatePointerEl(l,u,v),this.updateLabelEl(l,u,v,t)}Br(l,t,!0),this._renderHandle(n)}},i.prototype.remove=function(e){this.clear(e)},i.prototype.dispose=function(e){this.clear(e)},i.prototype.determineAnimation=function(e,t){var r=t.get("animation"),a=e.axis,n=a.type==="category",o=t.get("snap");if(!o&&!n)return!1;if(r==="auto"||r==null){var l=this.animationThreshold;if(n&&a.getBandWidth()>l)return!0;if(o){var s=Ve(e).seriesDataCount,u=a.getExtent();return Math.abs(u[0]-u[1])/s>l}return!1}return r===!0},i.prototype.makeElOption=function(e,t,r,a,n){},i.prototype.createPointerEl=function(e,t,r,a){var n=t.pointer;if(n){var o=lt(e).pointerEl=new Fa[n.type](kr(t.pointer));e.add(o)}},i.prototype.createLabelEl=function(e,t,r,a){if(t.label){var n=lt(e).labelEl=new q(kr(t.label));e.add(n),Or(n,a)}},i.prototype.updatePointerEl=function(e,t,r){var a=lt(e).pointerEl;a&&t.pointer&&(a.setStyle(t.pointer.style),r(a,{shape:t.pointer.shape}))},i.prototype.updateLabelEl=function(e,t,r,a){var n=lt(e).labelEl;n&&(n.setStyle(t.label.style),r(n,{x:t.label.x,y:t.label.y}),Or(n,a))},i.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),a=this._handle,n=t.getModel("handle"),o=t.get("status");if(!n.get("show")||!o||o==="hide"){a&&r.remove(a),this._handle=null;return}var l;this._handle||(l=!0,a=this._handle=di(n.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Ya(u.event)},onmousedown:pe(this._onHandleDragMove,this,0,0),drift:pe(this._onHandleDragMove,this),ondragend:pe(this._onHandleDragEnd,this)}),r.add(a)),Br(a,t,!1),a.setStyle(n.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=n.get("size");z(s)||(s=[s,s]),a.scaleX=s[0]/2,a.scaleY=s[1]/2,gi(this,"_doDispatchAxisPointer",n.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,l)}},i.prototype._moveHandleToValue=function(e,t){Rr(this._axisPointerModel,!t&&this._moveAnimation,this._handle,ye(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},i.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var a=this.updateHandleTransform(ye(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=a,r.stopAnimation(),r.attr(ye(a)),lt(r).lastProp=null,this._doDispatchAxisPointer()}},i.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},i.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},i.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,a=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),a&&t.remove(a),this._group=null,this._handle=null,this._payloadInfo=null),Se(this,"_doDispatchAxisPointer")},i.prototype.doClear=function(){},i.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},i}();function Rr(i,e,t,r){Mi(lt(t).lastProp,r)||(lt(t).lastProp=r,e?et(t,r,i):(t.stopAnimation(),t.attr(r)))}function Mi(i,e){if(ft(i)&&ft(e)){var t=!0;return T(e,function(r,a){t=t&&Mi(i[a],r)}),!!t}else return i===e}function Or(i,e){i[e.get(["label","show"])?"show":"hide"]()}function ye(i){return{x:i.x||0,y:i.y||0,rotation:i.rotation||0}}function Br(i,e,t){var r=e.get("z"),a=e.get("zlevel");i&&i.traverse(function(n){n.type!=="group"&&(r!=null&&(n.z=r),a!=null&&(n.zlevel=a),n.silent=t)})}function Po(i){var e=i.get("type"),t=i.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function Mo(i,e,t,r,a){var n=t.get("value"),o=ki(n,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),l=t.getModel("label"),s=Ne(l.get("padding")||0),u=l.getFont(),h=$a(o,u),c=a.position,v=h.width+s[1]+s[3],f=h.height+s[0]+s[2],d=a.align;d==="right"&&(c[0]-=v),d==="center"&&(c[0]-=v/2);var g=a.verticalAlign;g==="bottom"&&(c[1]-=f),g==="middle"&&(c[1]-=f/2),ko(c,v,f,r);var p=l.get("backgroundColor");(!p||p==="auto")&&(p=e.get(["axisLine","lineStyle","color"])),i.label={x:c[0],y:c[1],style:St(l,{text:o,font:u,fill:l.getTextColor(),padding:s,backgroundColor:p}),z2:10}}function ko(i,e,t,r){var a=r.getWidth(),n=r.getHeight();i[0]=Math.min(i[0]+e,a)-e,i[1]=Math.min(i[1]+t,n)-t,i[0]=Math.max(i[0],0),i[1]=Math.max(i[1],0)}function ki(i,e,t,r,a){i=e.scale.parse(i);var n=e.scale.getLabel({value:i},{precision:a.precision}),o=a.formatter;if(o){var l={value:pi(e,{value:i}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};T(r,function(s){var u=t.getSeriesByIndex(s.seriesIndex),h=s.dataIndexInside,c=u&&u.getDataParams(h);c&&l.seriesData.push(c)}),F(o)?n=o.replace("{value}",n):nt(o)&&(n=o(l))}return n}function Ri(i,e,t){var r=Za();return fi(r,r,t.rotation),Xa(r,r,t.position),Ua([i.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function Ro(i,e,t,r,a,n){var o=at.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=a.get(["label","margin"]),Mo(e,r,a,n,{position:Ri(r.axis,i,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Oo(i,e,t){return t=t||0,{x1:i[t],y1:i[1-t],x2:e[t],y2:e[1-t]}}function Bo(i,e,t){return t=t||0,{x:i[t],y:i[1-t],width:e[t],height:e[1-t]}}var Eo=function(i){O(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,a,n,o){var l=a.axis,s=l.grid,u=n.get("type"),h=Er(s,l).getOtherAxis(l).getGlobalExtent(),c=l.toGlobalCoord(l.dataToCoord(r,!0));if(u&&u!=="none"){var v=Po(n),f=Go[u](l,c,h);f.style=v,t.graphicKey=f.type,t.pointer=f}var d=Le(s.model,a);Ro(r,t,d,a,n,o)},e.prototype.getHandleTransform=function(t,r,a){var n=Le(r.axis.grid.model,r,{labelInside:!1});n.labelMargin=a.get(["handle","margin"]);var o=Ri(r.axis,t,n);return{x:o[0],y:o[1],rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,a,n){var o=a.axis,l=o.grid,s=o.getGlobalExtent(!0),u=Er(l,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,c=[t.x,t.y];c[h]+=r[h],c[h]=Math.min(s[1],c[h]),c[h]=Math.max(s[0],c[h]);var v=(u[1]+u[0])/2,f=[v,v];f[h]=c[h];var d=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:f,tooltipOption:d[h]}},e}(Do);function Er(i,e){var t={};return t[e.dim+"AxisIndex"]=e.index,i.getCartesian(t)}var Go={line:function(i,e,t){var r=Oo([e,t[0]],[e,t[1]],Gr(i));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(i,e,t){var r=Math.max(1,i.getBandWidth()),a=t[1]-t[0];return{type:"Rect",shape:Bo([e-r/2,t[0]],[r,a],Gr(i))}}};function Gr(i){return i.dim==="x"?0:1}var No=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Lt),tt=Tt(),zo=T;function Oi(i,e,t){if(!X.node){var r=e.getZr();tt(r).records||(tt(r).records={}),Vo(r,e);var a=tt(r).records[i]||(tt(r).records[i]={});a.handler=t}}function Vo(i,e){if(tt(i).initialized)return;tt(i).initialized=!0,t("click",H(Nr,"click")),t("mousemove",H(Nr,"mousemove")),t("globalout",Wo);function t(r,a){i.on(r,function(n){var o=Fo(e);zo(tt(i).records,function(l){l&&a(l,n,o.dispatchAction)}),Ho(o.pendings,e)})}}function Ho(i,e){var t=i.showTip.length,r=i.hideTip.length,a;t?a=i.showTip[t-1]:r&&(a=i.hideTip[r-1]),a&&(a.dispatchAction=null,e.dispatchAction(a))}function Wo(i,e,t){i.handler("leave",null,t)}function Nr(i,e,t,r){e.handler(i,t,r)}function Fo(i){var e={showTip:[],hideTip:[]},t=function(r){var a=e[r.type];a?a.push(r):(r.dispatchAction=t,i.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function Pe(i,e){if(!X.node){var t=e.getZr(),r=(tt(t).records||{})[i];r&&(tt(t).records[i]=null)}}var Yo=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,a){var n=r.getComponent("tooltip"),o=t.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";Oi("axisPointer",a,function(l,s,u){o!=="none"&&(l==="leave"||o.indexOf(l)>=0)&&u({type:"updateAxisPointer",currTrigger:l,x:s&&s.offsetX,y:s&&s.offsetY})})},e.prototype.remove=function(t,r){Pe("axisPointer",r)},e.prototype.dispose=function(t,r){Pe("axisPointer",r)},e.type="axisPointer",e}(It);function Bi(i,e){var t=[],r=i.seriesIndex,a;if(r==null||!(a=e.getSeriesByIndex(r)))return{point:[]};var n=a.getData(),o=Ka(n,i);if(o==null||o<0||z(o))return{point:[]};var l=n.getItemGraphicEl(o),s=a.coordinateSystem;if(a.getTooltipPosition)t=a.getTooltipPosition(o)||[];else if(s&&s.dataToPoint)if(i.isStacked){var u=s.getBaseAxis(),h=s.getOtherAxis(u),c=h.dim,v=u.dim,f=c==="x"||c==="radius"?1:0,d=n.mapDimension(v),g=[];g[f]=n.get(d,o),g[1-f]=n.get(n.getCalculationInfo("stackResultDimension"),o),t=s.dataToPoint(g)||[]}else t=s.dataToPoint(n.getValues(Ct(s.dimensions,function(y){return n.mapDimension(y)}),o))||[];else if(l){var p=l.getBoundingRect().clone();p.applyTransform(l.transform),t=[p.x+p.width/2,p.y+p.height/2]}return{point:t,el:l}}var zr=Tt();function Xo(i,e,t){var r=i.currTrigger,a=[i.x,i.y],n=i,o=i.dispatchAction||j(t.dispatchAction,t),l=e.getComponent("axisPointer").coordSysAxesInfo;if(l){Jt(a)&&(a=Bi({seriesIndex:n.seriesIndex,dataIndex:n.dataIndex},e).point);var s=Jt(a),u=n.axesInfo,h=l.axesInfo,c=r==="leave"||Jt(a),v={},f={},d={list:[],map:{}},g={showPointer:H(Uo,f),showTooltip:H($o,d)};T(l.coordSysMap,function(y,x){var m=s||y.containPoint(a);T(l.coordSysAxesInfo[x],function(_,b){var A=_.axis,S=Jo(u,_);if(!c&&m&&(!u||S)){var w=S&&S.value;w==null&&!s&&(w=A.pointToData(a)),w!=null&&Vr(_,w,g,!1,v)}})});var p={};return T(h,function(y,x){var m=y.linkGroup;m&&!f[x]&&T(m.axesInfo,function(_,b){var A=f[b];if(_!==y&&A){var S=A.value;m.mapper&&(S=y.axis.scale.parse(m.mapper(S,Hr(_),Hr(y)))),p[y.key]=S}})}),T(p,function(y,x){Vr(h[x],y,g,!0,v)}),Ko(f,h,v),jo(d,a,i,o),qo(h,o,t),v}}function Vr(i,e,t,r,a){var n=i.axis;if(!(n.scale.isBlank()||!n.containData(e))){if(!i.involveSeries){t.showPointer(i,e);return}var o=Zo(e,i),l=o.payloadBatch,s=o.snapToValue;l[0]&&a.seriesIndex==null&&V(a,l[0]),!r&&i.snap&&n.containData(s)&&s!=null&&(e=s),t.showPointer(i,e,l),t.showTooltip(i,o,s)}}function Zo(i,e){var t=e.axis,r=t.dim,a=i,n=[],o=Number.MAX_VALUE,l=-1;return T(e.seriesModels,function(s,u){var h=s.getData().mapDimensionsAll(r),c,v;if(s.getAxisTooltipData){var f=s.getAxisTooltipData(h,i,t);v=f.dataIndices,c=f.nestestValue}else{if(v=s.getData().indicesOfNearest(h[0],i,t.type==="category"?.5:null),!v.length)return;c=s.getData().get(h[0],v[0])}if(!(c==null||!isFinite(c))){var d=i-c,g=Math.abs(d);g<=o&&((g<o||d>=0&&l<0)&&(o=g,l=d,a=c,n.length=0),T(v,function(p){n.push({seriesIndex:s.seriesIndex,dataIndexInside:p,dataIndex:s.getData().getRawIndex(p)})}))}}),{payloadBatch:n,snapToValue:a}}function Uo(i,e,t,r){i[e.key]={value:t,payloadBatch:r}}function $o(i,e,t,r){var a=t.payloadBatch,n=e.axis,o=n.model,l=e.axisPointerModel;if(!(!e.triggerTooltip||!a.length)){var s=e.coordSys.model,u=zt(s),h=i.map[u];h||(h=i.map[u]={coordSysId:s.id,coordSysIndex:s.componentIndex,coordSysType:s.type,coordSysMainType:s.mainType,dataByAxis:[]},i.list.push(h)),h.dataByAxis.push({axisDim:n.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:l.get(["label","precision"]),formatter:l.get(["label","formatter"])},seriesDataIndices:a.slice()})}}function Ko(i,e,t){var r=t.axesInfo=[];T(e,function(a,n){var o=a.axisPointerModel.option,l=i[n];l?(!a.useHandle&&(o.status="show"),o.value=l.value,o.seriesDataIndices=(l.payloadBatch||[]).slice()):!a.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:a.axis.dim,axisIndex:a.axis.model.componentIndex,value:o.value})})}function jo(i,e,t,r){if(Jt(e)||!i.list.length){r({type:"hideTip"});return}var a=((i.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:a.dataIndexInside,dataIndex:a.dataIndex,seriesIndex:a.seriesIndex,dataByCoordSys:i.list})}function qo(i,e,t){var r=t.getZr(),a="axisPointerLastHighlights",n=zr(r)[a]||{},o=zr(r)[a]={};T(i,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&T(c.seriesDataIndices,function(v){var f=v.seriesIndex+" | "+v.dataIndex;o[f]=v})});var l=[],s=[];T(n,function(u,h){!o[h]&&s.push(u)}),T(o,function(u,h){!n[h]&&l.push(u)}),s.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:s}),l.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:l})}function Jo(i,e){for(var t=0;t<(i||[]).length;t++){var r=i[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function Hr(i){var e=i.axis.model,t={},r=t.axisDim=i.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function Jt(i){return!i||i[0]==null||isNaN(i[0])||i[1]==null||isNaN(i[1])}function Ei(i){Ii.registerAxisPointerClass("CartesianAxisPointer",Eo),i.registerComponentModel(No),i.registerComponentView(Yo),i.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!z(t)&&(e.axisPointer.link=[t])}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=fo(e,t)}),i.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Xo)}function Rs(i){At(Io),At(Ei)}function Qo(i,e){var t=Ne(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),i=new Q({shape:{x:i.x-t[3],y:i.y-t[0],width:i.width+t[1]+t[3],height:i.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),i}var ts=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Lt);function Gi(i){var e=i.get("confine");return e!=null?!!e:i.get("renderMode")==="richText"}function Ni(i){if(X.domSupported){for(var e=document.documentElement.style,t=0,r=i.length;t<r;t++)if(i[t]in e)return i[t]}}var zi=Ni(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),es=Ni(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Vi(i,e){if(!i)return e;e=yi(e,!0);var t=i.indexOf(e);return i=t===-1?e:"-"+i.slice(0,t)+"-"+e,i.toLowerCase()}function rs(i,e){var t=i.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i);return t?t[e]:null}var is=Vi(es,"transition"),He=Vi(zi,"transform"),as="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(X.transform3dSupported?"will-change:transform;":"");function ns(i){return i=i==="left"?"right":i==="right"?"left":i==="top"?"bottom":"top",i}function os(i,e,t){if(!F(t)||t==="inside")return"";var r=i.get("backgroundColor"),a=i.get("borderWidth");e=ie(e);var n=ns(t),o=Math.max(Math.round(a)*1.5,6),l="",s=He+":",u;ct(["left","right"],n)>-1?(l+="top:50%",s+="translateY(-50%) rotate("+(u=n==="left"?-225:-45)+"deg)"):(l+="left:50%",s+="translateX(-50%) rotate("+(u=n==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=o+a,v=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),f=Math.round(((v-Math.SQRT2*a)/2+Math.SQRT2*a-(v-c)/2)*100)/100;l+=";"+n+":-"+f+"px";var d=e+" solid "+a+"px;",g=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",l+";"+s+";","border-bottom:"+d,"border-right:"+d,"background-color:"+r+";"];return'<div style="'+g.join("")+'"></div>'}function ss(i,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+i/2+"s "+t,a="opacity"+r+",visibility"+r;return e||(r=" "+i+"s "+t,a+=X.transformSupported?","+He+r:",left"+r+",top"+r),is+":"+a}function Wr(i,e,t){var r=i.toFixed(0)+"px",a=e.toFixed(0)+"px";if(!X.transformSupported)return t?"top:"+a+";left:"+r+";":[["top",a],["left",r]];var n=X.transform3dSupported,o="translate"+(n?"3d":"")+"("+r+","+a+(n?",0":"")+")";return t?"top:0;left:0;"+He+":"+o+";":[["top",0],["left",0],[zi,o]]}function ls(i){var e=[],t=i.get("fontSize"),r=i.getTextColor();r&&e.push("color:"+r),e.push("font:"+i.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var a=i.get("textShadowColor"),n=i.get("textShadowBlur")||0,o=i.get("textShadowOffsetX")||0,l=i.get("textShadowOffsetY")||0;return a&&n&&e.push("text-shadow:"+o+"px "+l+"px "+n+"px "+a),T(["decoration","align"],function(s){var u=i.get(s);u&&e.push("text-"+s+":"+u)}),e.join(";")}function us(i,e,t){var r=[],a=i.get("transitionDuration"),n=i.get("backgroundColor"),o=i.get("shadowBlur"),l=i.get("shadowColor"),s=i.get("shadowOffsetX"),u=i.get("shadowOffsetY"),h=i.getModel("textStyle"),c=mi(i,"html"),v=s+"px "+u+"px "+o+"px "+l;return r.push("box-shadow:"+v),e&&a&&r.push(ss(a,t)),n&&r.push("background-color:"+n),T(["width","color","radius"],function(f){var d="border-"+f,g=yi(d),p=i.get(g);p!=null&&r.push(d+":"+p+(f==="color"?"":"px"))}),r.push(ls(h)),c!=null&&r.push("padding:"+Ne(c).join("px ")+"px"),r.join(";")+";"}function Fr(i,e,t,r,a){var n=e&&e.painter;if(t){var o=n&&n.getViewportRoot();o&&qa(i,o,t,r,a)}else{i[0]=r,i[1]=a;var l=n&&n.getViewportRootOffset();l&&(i[0]+=l.offsetLeft,i[1]+=l.offsetTop)}i[2]=i[0]/e.getWidth(),i[3]=i[1]/e.getHeight()}var hs=function(){function i(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,X.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var a=this._zr=e.getZr(),n=t.appendTo,o=n&&(F(n)?document.querySelector(n):Qe(n)?n:nt(n)&&n(e.getDom()));Fr(this._styleCoord,a,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var l=this;r.onmouseenter=function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0},r.onmousemove=function(s){if(s=s||window.event,!l._enterable){var u=a.handler,h=a.painter.getViewportRoot();ja(h,s,!0),u.dispatch("mousemove",s)}},r.onmouseleave=function(){l._inContent=!1,l._enterable&&l._show&&l.hideLater(l._hideDelay)}}return i.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=rs(t,"position"),a=t.style;a.position!=="absolute"&&r!=="absolute"&&(a.position="relative")}var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n,this.el.className=e.get("className")||""},i.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,a=r.style,n=this._styleCoord;r.innerHTML?a.cssText=as+us(e,!this._firstShow,this._longHide)+Wr(n[0],n[1],!0)+("border-color:"+ie(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):a.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},i.prototype.setContent=function(e,t,r,a,n){var o=this.el;if(e==null){o.innerHTML="";return}var l="";if(F(n)&&r.get("trigger")==="item"&&!Gi(r)&&(l=os(r,a,n)),F(e))o.innerHTML=e+l;else if(e){o.innerHTML="",z(e)||(e=[e]);for(var s=0;s<e.length;s++)Qe(e[s])&&e[s].parentNode!==o&&o.appendChild(e[s]);if(l&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=l,o.appendChild(u)}}},i.prototype.setEnterable=function(e){this._enterable=e},i.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},i.prototype.moveTo=function(e,t){var r=this._styleCoord;if(Fr(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var a=this.el.style,n=Wr(r[0],r[1]);T(n,function(o){a[o[0]]=o[1]})}},i.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},i.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",X.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},i.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(j(this.hide,this),e)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},i}(),cs=function(){function i(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),Xr(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return i.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},i.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},i.prototype.setContent=function(e,t,r,a,n){var o=this;ft(e)&&Ja(""),this.el&&this._zr.remove(this.el);var l=r.getModel("textStyle");this.el=new q({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:a,textShadowColor:l.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:mi(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),T(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=r.get(u)}),T(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=l.get(u)||0}),this._zr.add(this.el);var s=this;this.el.on("mouseover",function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0}),this.el.on("mouseout",function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1})},i.prototype.setEnterable=function(e){this._enterable=e},i.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=Yr(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},i.prototype.moveTo=function(e,t){var r=this.el;if(r){var a=this._styleCoord;Xr(a,this._zr,e,t),e=a[0],t=a[1];var n=r.style,o=rt(n.borderWidth||0),l=Yr(n);r.x=e+o+l.left,r.y=t+o+l.top,r.markRedraw()}},i.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},i.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},i.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(j(this.hide,this),e)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){this._zr.remove(this.el)},i}();function rt(i){return Math.max(0,i)}function Yr(i){var e=rt(i.shadowBlur||0),t=rt(i.shadowOffsetX||0),r=rt(i.shadowOffsetY||0);return{left:rt(e-t),right:rt(e+t),top:rt(e-r),bottom:rt(e+r)}}function Xr(i,e,t,r){i[0]=t,i[1]=r,i[2]=i[0]/e.getWidth(),i[3]=i[1]/e.getHeight()}var vs=new Q({shape:{x:-1,y:-1,width:2,height:2}}),fs=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(X.node||!r.getDom())){var a=t.getComponent("tooltip"),n=this._renderMode=Qa(a.get("renderMode"));this._tooltipContent=n==="richText"?new cs(r):new hs(r,{appendTo:a.get("appendToBody",!0)?"body":a.get("appendTo",!0)})}},e.prototype.render=function(t,r,a){if(!(X.node||!a.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=a;var n=this._tooltipContent;n.update(t),n.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?gi(this,"_updatePosition",50,"fixRate"):Se(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");Oi("itemTooltip",this._api,j(function(a,n,o){r!=="none"&&(r.indexOf(a)>=0?this._tryShow(n,o):a==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,a=this._api,n=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&n!=="none"&&n!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!a.isDisposed()&&o.manuallyShowTip(t,r,a,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,a,n){if(!(n.from===this.uid||X.node||!a.getDom())){var o=Zr(n,a);this._ticket="";var l=n.dataByCoordSys,s=ys(n,r,a);if(s){var u=s.el.getBoundingRect().clone();u.applyTransform(s.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:s.el,position:n.position,positionDefault:"bottom"},o)}else if(n.tooltip&&n.x!=null&&n.y!=null){var h=vs;h.x=n.x,h.y=n.y,h.update(),W(h).tooltipConfig={name:null,option:n.tooltip},this._tryShow({offsetX:n.x,offsetY:n.y,target:h},o)}else if(l)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,dataByCoordSys:l,tooltipOption:n.tooltipOption},o);else if(n.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,a,n))return;var c=Bi(n,r),v=c.point[0],f=c.point[1];v!=null&&f!=null&&this._tryShow({offsetX:v,offsetY:f,target:c.el,position:n.position,positionDefault:"bottom"},o)}else n.x!=null&&n.y!=null&&(a.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:a.getZr().findHover(n.x,n.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,a,n){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,n.from!==this.uid&&this._hide(Zr(n,a))},e.prototype._manuallyAxisShowTip=function(t,r,a,n){var o=n.seriesIndex,l=n.dataIndex,s=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||l==null||s==null)){var u=r.getSeriesByIndex(o);if(u){var h=u.getData(),c=Rt([h.getItemModel(l),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return a.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:l,position:n.position}),!0}}},e.prototype._tryShow=function(t,r){var a=t.target,n=this._tooltipModel;if(n){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(a){var l=W(a);if(l.ssrType==="legend")return;this._lastDataByCoordSys=null;var s,u;tn(a,function(h){if(W(h).dataIndex!=null)return s=h,!0;if(W(h).tooltipConfig!=null)return u=h,!0},!0),s?this._showSeriesItemTooltip(t,s,r):u?this._showComponentItemTooltip(t,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var a=t.get("showDelay");r=j(r,this),clearTimeout(this._showTimout),a>0?this._showTimout=setTimeout(r,a):r()},e.prototype._showAxisTooltip=function(t,r){var a=this._ecModel,n=this._tooltipModel,o=[r.offsetX,r.offsetY],l=Rt([r.tooltipOption],n),s=this._renderMode,u=[],h=tr("section",{blocks:[],noHeader:!0}),c=[],v=new le;T(t,function(x){T(x.dataByAxis,function(m){var _=a.getComponent(m.axisDim+"Axis",m.axisIndex),b=m.value;if(!(!_||b==null)){var A=ki(b,_.axis,a,m.seriesDataIndices,m.valueLabelOpt),S=tr("section",{header:A,noHeader:!en(A),sortBlocks:!0,blocks:[]});h.blocks.push(S),T(m.seriesDataIndices,function(w){var L=a.getSeriesByIndex(w.seriesIndex),D=w.dataIndexInside,C=L.getDataParams(D);if(!(C.dataIndex<0)){C.axisDim=m.axisDim,C.axisIndex=m.axisIndex,C.axisType=m.axisType,C.axisId=m.axisId,C.axisValue=pi(_.axis,{value:b}),C.axisValueLabel=A,C.marker=v.makeTooltipMarker("item",ie(C.color),s);var M=er(L.formatTooltip(D,!0,null)),I=M.frag;if(I){var k=Rt([L],n).get("valueFormatter");S.blocks.push(k?V({valueFormatter:k},I):I)}M.text&&c.push(M.text),u.push(C)}})}})}),h.blocks.reverse(),c.reverse();var f=r.position,d=l.get("order"),g=rr(h,v,s,d,a.get("useUTC"),l.get("textStyle"));g&&c.unshift(g);var p=s==="richText"?`

`:"<br/>",y=c.join(p);this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(l,f,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(l,y,u,Math.random()+"",o[0],o[1],f,null,v)})},e.prototype._showSeriesItemTooltip=function(t,r,a){var n=this._ecModel,o=W(r),l=o.seriesIndex,s=n.getSeriesByIndex(l),u=o.dataModel||s,h=o.dataIndex,c=o.dataType,v=u.getData(c),f=this._renderMode,d=t.positionDefault,g=Rt([v.getItemModel(h),u,s&&(s.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),p=g.get("trigger");if(!(p!=null&&p!=="item")){var y=u.getDataParams(h,c),x=new le;y.marker=x.makeTooltipMarker("item",ie(y.color),f);var m=er(u.formatTooltip(h,!1,c)),_=g.get("order"),b=g.get("valueFormatter"),A=m.frag,S=A?rr(b?V({valueFormatter:b},A):A,x,f,_,n.get("useUTC"),g.get("textStyle")):m.text,w="item_"+u.name+"_"+h;this._showOrMove(g,function(){this._showTooltipContent(g,S,y,w,t.offsetX,t.offsetY,t.position,t.target,x)}),a({type:"showTip",dataIndexInside:h,dataIndex:v.getRawIndex(h),seriesIndex:l,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,a){var n=this._renderMode==="html",o=W(r),l=o.tooltipConfig,s=l.option||{},u=s.encodeHTMLContent;if(F(s)){var h=s;s={content:h,formatter:h},u=!0}u&&n&&s.content&&(s=Nt(s),s.content=rn(s.content));var c=[s],v=this._ecModel.getComponent(o.componentMainType,o.componentIndex);v&&c.push(v),c.push({formatter:s.content});var f=t.positionDefault,d=Rt(c,this._tooltipModel,f?{position:f}:null),g=d.get("content"),p=Math.random()+"",y=new le;this._showOrMove(d,function(){var x=Nt(d.get("formatterParams")||{});this._showTooltipContent(d,g,x,p,t.offsetX,t.offsetY,t.position,r,y)}),a({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,a,n,o,l,s,u,h){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var c=this._tooltipContent;c.setEnterable(t.get("enterable"));var v=t.get("formatter");s=s||t.get("position");var f=r,d=this._getNearestPoint([o,l],a,t.get("trigger"),t.get("borderColor")),g=d.color;if(v)if(F(v)){var p=t.ecModel.get("useUTC"),y=z(a)?a[0]:a,x=y&&y.axisType&&y.axisType.indexOf("time")>=0;f=v,x&&(f=an(y.axisValue,f,p)),f=nn(f,a,!0)}else if(nt(v)){var m=j(function(_,b){_===this._ticket&&(c.setContent(b,h,t,g,s),this._updatePosition(t,s,o,l,c,a,u))},this);this._ticket=n,f=v(a,n,m)}else f=v;c.setContent(f,h,t,g,s),c.show(t,g),this._updatePosition(t,s,o,l,c,a,u)}},e.prototype._getNearestPoint=function(t,r,a,n){if(a==="axis"||z(r))return{color:n||(this._renderMode==="html"?"#fff":"none")};if(!z(r))return{color:n||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,a,n,o,l,s){var u=this._api.getWidth(),h=this._api.getHeight();r=r||t.get("position");var c=o.getSize(),v=t.get("align"),f=t.get("verticalAlign"),d=s&&s.getBoundingRect().clone();if(s&&d.applyTransform(s.transform),nt(r)&&(r=r([a,n],l,o.el,d,{viewSize:[u,h],contentSize:c.slice()})),z(r))a=K(r[0],u),n=K(r[1],h);else if(ft(r)){var g=r;g.width=c[0],g.height=c[1];var p=bt(g,{width:u,height:h});a=p.x,n=p.y,v=null,f=null}else if(F(r)&&s){var y=ps(r,d,c,t.get("borderWidth"));a=y[0],n=y[1]}else{var y=ds(a,n,o,u,h,v?null:20,f?null:20);a=y[0],n=y[1]}if(v&&(a-=Ur(v)?c[0]/2:v==="right"?c[0]:0),f&&(n-=Ur(f)?c[1]/2:f==="bottom"?c[1]:0),Gi(t)){var y=gs(a,n,o,u,h);a=y[0],n=y[1]}o.moveTo(a,n)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var a=this._lastDataByCoordSys,n=this._cbParamsList,o=!!a&&a.length===t.length;return o&&T(a,function(l,s){var u=l.dataByAxis||[],h=t[s]||{},c=h.dataByAxis||[];o=o&&u.length===c.length,o&&T(u,function(v,f){var d=c[f]||{},g=v.seriesDataIndices||[],p=d.seriesDataIndices||[];o=o&&v.value===d.value&&v.axisType===d.axisType&&v.axisId===d.axisId&&g.length===p.length,o&&T(g,function(y,x){var m=p[x];o=o&&y.seriesIndex===m.seriesIndex&&y.dataIndex===m.dataIndex}),n&&T(v.seriesDataIndices,function(y){var x=y.seriesIndex,m=r[x],_=n[x];m&&_&&_.data!==m.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){X.node||!r.getDom()||(Se(this,"_updatePosition"),this._tooltipContent.dispose(),Pe("itemTooltip",r))},e.type="tooltip",e}(It);function Rt(i,e,t){var r=e.ecModel,a;t?(a=new ht(t,r,r),a=new ht(e.option,a,r)):a=e;for(var n=i.length-1;n>=0;n--){var o=i[n];o&&(o instanceof ht&&(o=o.get("tooltip",!0)),F(o)&&(o={formatter:o}),o&&(a=new ht(o,a,r)))}return a}function Zr(i,e){return i.dispatchAction||j(e.dispatchAction,e)}function ds(i,e,t,r,a,n,o){var l=t.getSize(),s=l[0],u=l[1];return n!=null&&(i+s+n+2>r?i-=s+n:i+=n),o!=null&&(e+u+o>a?e-=u+o:e+=o),[i,e]}function gs(i,e,t,r,a){var n=t.getSize(),o=n[0],l=n[1];return i=Math.min(i+o,r)-o,e=Math.min(e+l,a)-l,i=Math.max(i,0),e=Math.max(e,0),[i,e]}function ps(i,e,t,r){var a=t[0],n=t[1],o=Math.ceil(Math.SQRT2*r)+8,l=0,s=0,u=e.width,h=e.height;switch(i){case"inside":l=e.x+u/2-a/2,s=e.y+h/2-n/2;break;case"top":l=e.x+u/2-a/2,s=e.y-n-o;break;case"bottom":l=e.x+u/2-a/2,s=e.y+h+o;break;case"left":l=e.x-a-o,s=e.y+h/2-n/2;break;case"right":l=e.x+u+o,s=e.y+h/2-n/2}return[l,s]}function Ur(i){return i==="center"||i==="middle"}function ys(i,e,t){var r=on(i).queryOptionMap,a=r.keys()[0];if(!(!a||a==="series")){var n=sn(e,a,r.get(a),{useDefault:!1,enableAll:!1,enableNone:!1}),o=n.models[0];if(o){var l=t.getViewOfComponentModel(o),s;if(l.group.traverse(function(u){var h=W(u).tooltipConfig;if(h&&h.name===i.name)return s=u,!0}),s)return{componentMainType:a,componentIndex:o.componentIndex,el:s}}}}function Os(i){At(Ei),i.registerComponentModel(ts),i.registerComponentView(fs),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ir),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ir)}var ms=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Lt),xs=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,a){if(this.group.removeAll(),!!t.get("show")){var n=this.group,o=t.getModel("textStyle"),l=t.getModel("subtextStyle"),s=t.get("textAlign"),u=_t(t.get("textBaseline"),t.get("textVerticalAlign")),h=new q({style:St(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),v=t.get("subtext"),f=new q({style:St(l,{text:v,fill:l.getTextColor(),y:c.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),g=t.get("sublink"),p=t.get("triggerEvent",!0);h.silent=!d&&!p,f.silent=!g&&!p,d&&h.on("click",function(){ar(d,"_"+t.get("target"))}),g&&f.on("click",function(){ar(g,"_"+t.get("subtarget"))}),W(h).eventData=W(f).eventData=p?{componentType:"title",componentIndex:t.componentIndex}:null,n.add(h),v&&n.add(f);var y=n.getBoundingRect(),x=t.getBoxLayoutParams();x.width=y.width,x.height=y.height;var m=bt(x,{width:a.getWidth(),height:a.getHeight()},t.get("padding"));s||(s=t.get("left")||t.get("right"),s==="middle"&&(s="center"),s==="right"?m.x+=m.width:s==="center"&&(m.x+=m.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?m.y+=m.height:u==="middle"&&(m.y+=m.height/2),u=u||"top"),n.x=m.x,n.y=m.y,n.markRedraw();var _={align:s,verticalAlign:u};h.setStyle(_),f.setStyle(_),y=n.getBoundingRect();var b=m.margin,A=t.getItemStyle(["color","opacity"]);A.fill=t.get("backgroundColor");var S=new Q({shape:{x:y.x-b[3],y:y.y-b[0],width:y.width+b[1]+b[3],height:y.height+b[0]+b[2],r:t.get("borderRadius")},style:A,subPixelOptimize:!0,silent:!0});n.add(S)}},e.type="title",e}(It);function Bs(i){i.registerComponentModel(ms),i.registerComponentView(xs)}var _s=function(i,e){if(e==="all")return{type:"all",title:i.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:i.getLocaleModel().get(["legend","selector","inverse"])}},Me=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,a){this.mergeDefaultAndTheme(t,a),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){i.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,a=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),z(r)&&T(r,function(n,o){F(n)&&(n={type:n}),r[o]=$(n,_s(a,n.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,a=0;a<t.length;a++){var n=t[a].get("name");if(this.isSelected(n)){this.select(n),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],a=[];t.eachRawSeries(function(s){var u=s.name;a.push(u);var h;if(s.legendVisualProvider){var c=s.legendVisualProvider,v=c.getAllNames();t.isSeriesFiltered(s)||(a=a.concat(v)),v.length?r=r.concat(v):h=!0}else h=!0;h&&ln(s)&&r.push(s.name)}),this._availableNames=a;var n=this.get("data")||r,o=Ge(),l=Ct(n,function(s){return(F(s)||Ht(s))&&(s={name:s}),o.get(s.name)?null:(o.set(s.name,!0),new ht(s,this,this.ecModel))},this);this._data=ui(l,function(s){return!!s})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,a=this.get("selectedMode");if(a==="single"){var n=this._data;T(n,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;T(t,function(a){r[a.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;T(t,function(a){var n=a.get("name",!0);r.hasOwnProperty(n)||(r[n]=!0),r[n]=!r[n]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&ct(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Lt),mt=H,ke=T,qt=dt,Hi=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new qt),this.group.add(this._selectorGroup=new qt),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,a){var n=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),l=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&l==="vertical"?"right":"left");var s=t.get("selector",!0),u=t.get("selectorPosition",!0);s&&(!u||u==="auto")&&(u=l==="horizontal"?"end":"start"),this.renderInner(o,t,r,a,s,l,u);var h=t.getBoxLayoutParams(),c={width:a.getWidth(),height:a.getHeight()},v=t.get("padding"),f=bt(h,c,v),d=this.layoutInner(t,o,f,n,s,u),g=bt(J({width:d.width,height:d.height},h),c,v);this.group.x=g.x-d.x,this.group.y=g.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Qo(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,a,n,o,l,s){var u=this.getContentGroup(),h=Ge(),c=r.get("selectedMode"),v=[];a.eachRawSeries(function(f){!f.get("legendHoverLink")&&v.push(f.id)}),ke(r.getData(),function(f,d){var g=f.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var p=new qt;p.newline=!0,u.add(p);return}var y=a.getSeriesByName(g)[0];if(!h.get(g))if(y){var x=y.getData(),m=x.getVisual("legendLineStyle")||{},_=x.getVisual("legendIcon"),b=x.getVisual("style"),A=this._createItem(y,g,d,f,r,t,m,b,_,c,n);A.on("click",mt($r,g,null,n,v)).on("mouseover",mt(Re,y.name,null,n,v)).on("mouseout",mt(Oe,y.name,null,n,v)),a.ssr&&A.eachChild(function(S){var w=W(S);w.seriesIndex=y.seriesIndex,w.dataIndex=d,w.ssrType="legend"}),h.set(g,!0)}else a.eachRawSeries(function(S){if(!h.get(g)&&S.legendVisualProvider){var w=S.legendVisualProvider;if(!w.containName(g))return;var L=w.indexOfName(g),D=w.getItemVisual(L,"style"),C=w.getItemVisual(L,"legendIcon"),M=un(D.fill);M&&M[3]===0&&(M[3]=.2,D=V(V({},D),{fill:hn(M,"rgba")}));var I=this._createItem(S,g,d,f,r,t,{},D,C,c,n);I.on("click",mt($r,null,g,n,v)).on("mouseover",mt(Re,null,g,n,v)).on("mouseout",mt(Oe,null,g,n,v)),a.ssr&&I.eachChild(function(k){var P=W(k);P.seriesIndex=S.seriesIndex,P.dataIndex=d,P.ssrType="legend"}),h.set(g,!0)}},this)},this),o&&this._createSelector(o,r,n,l,s)},e.prototype._createSelector=function(t,r,a,n,o){var l=this.getSelectorGroup();ke(t,function(u){var h=u.type,c=new q({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect"})}});l.add(c);var v=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);Ee(c,{normal:v,emphasis:f},{defaultText:u.title}),nr(c)})},e.prototype._createItem=function(t,r,a,n,o,l,s,u,h,c,v){var f=t.visualDrawType,d=o.get("itemWidth"),g=o.get("itemHeight"),p=o.isSelected(r),y=n.get("symbolRotate"),x=n.get("symbolKeepAspect"),m=n.get("icon");h=m||h||"roundRect";var _=bs(h,n,s,u,f,p,v),b=new qt,A=n.getModel("textStyle");if(nt(t.getLegendIcon)&&(!m||m==="inherit"))b.add(t.getLegendIcon({itemWidth:d,itemHeight:g,icon:h,iconRotate:y,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:x}));else{var S=m==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;b.add(ws({itemWidth:d,itemHeight:g,icon:h,iconRotate:S,itemStyle:_.itemStyle,symbolKeepAspect:x}))}var w=l==="left"?d+5:-5,L=l,D=o.get("formatter"),C=r;F(D)&&D?C=D.replace("{name}",r??""):nt(D)&&(C=D(r));var M=p?A.getTextColor():n.get("inactiveColor");b.add(new q({style:St(A,{text:C,x:w,y:g/2,fill:M,align:L,verticalAlign:"middle"},{inheritColor:M})}));var I=new Q({shape:b.getBoundingRect(),style:{fill:"transparent"}}),k=n.getModel("tooltip");return k.get("show")&&ci({el:I,componentModel:o,itemName:r,itemTooltipOption:k.option}),b.add(I),b.eachChild(function(P){P.silent=!0}),I.silent=!c,this.getContentGroup().add(b),nr(b),b.__legendDataIndex=a,b},e.prototype.layoutInner=function(t,r,a,n,o,l){var s=this.getContentGroup(),u=this.getSelectorGroup();Et(t.get("orient"),s,t.get("itemGap"),a.width,a.height);var h=s.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),s.markRedraw(),o){Et("horizontal",u,t.get("selectorItemGap",!0));var v=u.getBoundingRect(),f=[-v.x,-v.y],d=t.get("selectorButtonGap",!0),g=t.getOrient().index,p=g===0?"width":"height",y=g===0?"height":"width",x=g===0?"y":"x";l==="end"?f[g]+=h[p]+d:c[g]+=v[p]+d,f[1-g]+=h[y]/2-v[y]/2,u.x=f[0],u.y=f[1],s.x=c[0],s.y=c[1];var m={x:0,y:0};return m[p]=h[p]+d+v[p],m[y]=Math.max(h[y],v[y]),m[x]=Math.min(0,v[x]+f[1-g]),m}else return s.x=c[0],s.y=c[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(It);function bs(i,e,t,r,a,n,o){function l(p,y){p.lineWidth==="auto"&&(p.lineWidth=y.lineWidth>0?2:0),ke(p,function(x,m){p[m]==="inherit"&&(p[m]=y[m])})}var s=e.getModel("itemStyle"),u=s.getItemStyle(),h=i.lastIndexOf("empty",0)===0?"fill":"stroke",c=s.getShallow("decal");u.decal=!c||c==="inherit"?r.decal:cn(c,o),u.fill==="inherit"&&(u.fill=r[a]),u.stroke==="inherit"&&(u.stroke=r[h]),u.opacity==="inherit"&&(u.opacity=(a==="fill"?r:t).opacity),l(u,r);var v=e.getModel("lineStyle"),f=v.getLineStyle();if(l(f,t),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!n){var d=e.get("inactiveBorderWidth"),g=u[h];u.lineWidth=d==="auto"?r.lineWidth>0&&g?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),f.stroke=v.get("inactiveColor"),f.lineWidth=v.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function ws(i){var e=i.icon||"roundRect",t=vi(e,0,0,i.itemWidth,i.itemHeight,i.itemStyle.fill,i.symbolKeepAspect);return t.setStyle(i.itemStyle),t.rotation=(i.iconRotate||0)*Math.PI/180,t.setOrigin([i.itemWidth/2,i.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function $r(i,e,t,r){Oe(i,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:i??e}),Re(i,e,t,r)}function Wi(i){for(var e=i.getZr().storage.getDisplayList(),t,r=0,a=e.length;r<a&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function Re(i,e,t,r){Wi(t)||t.dispatchAction({type:"highlight",seriesName:i,name:e,excludeSeriesId:r})}function Oe(i,e,t,r){Wi(t)||t.dispatchAction({type:"downplay",seriesName:i,name:e,excludeSeriesId:r})}function Ss(i){var e=i.findComponents({mainType:"legend"});e&&e.length&&i.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function Ot(i,e,t){var r={},a=i==="toggleSelected",n;return t.eachComponent("legend",function(o){a&&n!=null?o[n?"select":"unSelect"](e.name):i==="allSelect"||i==="inverseSelect"?o[i]():(o[i](e.name),n=o.isSelected(e.name));var l=o.getData();T(l,function(s){var u=s.get("name");if(!(u===`
`||u==="")){var h=o.isSelected(u);r.hasOwnProperty(u)?r[u]=r[u]&&h:r[u]=h}})}),i==="allSelect"||i==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function As(i){i.registerAction("legendToggleSelect","legendselectchanged",H(Ot,"toggleSelected")),i.registerAction("legendAllSelect","legendselectall",H(Ot,"allSelect")),i.registerAction("legendInverseSelect","legendinverseselect",H(Ot,"inverseSelect")),i.registerAction("legendSelect","legendselected",H(Ot,"select")),i.registerAction("legendUnSelect","legendunselected",H(Ot,"unSelect"))}function Fi(i){i.registerComponentModel(Me),i.registerComponentView(Hi),i.registerProcessor(i.PRIORITY.PROCESSOR.SERIES_FILTER,Ss),i.registerSubTypeDefaulter("legend",function(){return"plain"}),As(i)}var Cs=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,a){var n=si(t);i.prototype.init.call(this,t,r,a),Kr(this,t,n)},e.prototype.mergeOption=function(t,r){i.prototype.mergeOption.call(this,t,r),Kr(this,this.option,t)},e.type="legend.scroll",e.defaultOption=ti(Me.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(Me);function Kr(i,e,t){var r=i.getOrient(),a=[1,1];a[r.index]=0,li(e,t,{type:"box",ignoreSize:!!a})}var jr=dt,me=["width","height"],xe=["x","y"],Ts=function(i){O(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){i.prototype.init.call(this),this.group.add(this._containerGroup=new jr),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new jr)},e.prototype.resetInner=function(){i.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,a,n,o,l,s){var u=this;i.prototype.renderInner.call(this,t,r,a,n,o,l,s);var h=this._controllerGroup,c=r.get("pageIconSize",!0),v=z(c)?c:[c,c];d("pagePrev",0);var f=r.getModel("pageTextStyle");h.add(new q({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),d("pageNext",1);function d(g,p){var y=g+"DataIndex",x=di(r.get("pageIcons",!0)[r.getOrient().name][p],{onclick:j(u._pageGo,u,y,r,n)},{x:-v[0]/2,y:-v[1]/2,width:v[0],height:v[1]});x.name=g,h.add(x)}},e.prototype.layoutInner=function(t,r,a,n,o,l){var s=this.getSelectorGroup(),u=t.getOrient().index,h=me[u],c=xe[u],v=me[1-u],f=xe[1-u];o&&Et("horizontal",s,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),g=s.getBoundingRect(),p=[-g.x,-g.y],y=Nt(a);o&&(y[h]=a[h]-g[h]-d);var x=this._layoutContentAndController(t,n,y,u,h,v,f,c);if(o){if(l==="end")p[u]+=x[h]+d;else{var m=g[h]+d;p[u]-=m,x[c]-=m}x[h]+=g[h]+d,p[1-u]+=x[f]+x[v]/2-g[v]/2,x[v]=Math.max(x[v],g[v]),x[f]=Math.min(x[f],g[f]+p[1-u]),s.x=p[0],s.y=p[1],s.markRedraw()}return x},e.prototype._layoutContentAndController=function(t,r,a,n,o,l,s,u){var h=this.getContentGroup(),c=this._containerGroup,v=this._controllerGroup;Et(t.get("orient"),h,t.get("itemGap"),n?a.width:null,n?null:a.height),Et("horizontal",v,t.get("pageButtonItemGap",!0));var f=h.getBoundingRect(),d=v.getBoundingRect(),g=this._showController=f[o]>a[o],p=[-f.x,-f.y];r||(p[n]=h[u]);var y=[0,0],x=[-d.x,-d.y],m=_t(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(g){var _=t.get("pageButtonPosition",!0);_==="end"?x[n]+=a[o]-d[o]:y[n]+=d[o]+m}x[1-n]+=f[l]/2-d[l]/2,h.setPosition(p),c.setPosition(y),v.setPosition(x);var b={x:0,y:0};if(b[o]=g?a[o]:f[o],b[l]=Math.max(f[l],d[l]),b[s]=Math.min(0,d[s]+x[1-n]),c.__rectSize=a[o],g){var A={x:0,y:0};A[o]=Math.max(a[o]-d[o]-m,0),A[l]=b[l],c.setClipPath(new Q({shape:A})),c.__rectSize=A[o]}else v.eachChild(function(w){w.attr({invisible:!0,silent:!0})});var S=this._getPageInfo(t);return S.pageIndex!=null&&et(h,{x:S.contentPosition[0],y:S.contentPosition[1]},g?t:null),this._updatePageInfoView(t,S),b},e.prototype._pageGo=function(t,r,a){var n=this._getPageInfo(r)[t];n!=null&&a.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var a=this._controllerGroup;T(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",v=r[c]!=null,f=a.childOfName(h);f&&(f.setStyle("fill",v?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=v?"pointer":"default")});var n=a.childOfName("pageText"),o=t.get("pageFormatter"),l=r.pageIndex,s=l!=null?l+1:0,u=r.pageCount;n&&o&&n.setStyle("text",F(o)?o.replace("{current}",s==null?"":s+"").replace("{total}",u==null?"":u+""):o({current:s,total:u}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),a=this.getContentGroup(),n=this._containerGroup.__rectSize,o=t.getOrient().index,l=me[o],s=xe[o],u=this._findTargetItemIndex(r),h=a.children(),c=h[u],v=h.length,f=v?1:0,d={contentPosition:[a.x,a.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return d;var g=_(c);d.contentPosition[o]=-g.s;for(var p=u+1,y=g,x=g,m=null;p<=v;++p)m=_(h[p]),(!m&&x.e>y.s+n||m&&!b(m,y.s))&&(x.i>y.i?y=x:y=m,y&&(d.pageNextDataIndex==null&&(d.pageNextDataIndex=y.i),++d.pageCount)),x=m;for(var p=u-1,y=g,x=g,m=null;p>=-1;--p)m=_(h[p]),(!m||!b(x,m.s))&&y.i<x.i&&(x=y,d.pagePrevDataIndex==null&&(d.pagePrevDataIndex=y.i),++d.pageCount,++d.pageIndex),y=m;return d;function _(A){if(A){var S=A.getBoundingRect(),w=S[s]+A[s];return{s:w,e:w+S[l],i:A.__legendDataIndex}}}function b(A,S){return A.e>=S&&A.s<=S+n}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,a=this.getContentGroup(),n;return a.eachChild(function(o,l){var s=o.__legendDataIndex;n==null&&s!=null&&(n=l),s===t&&(r=l)}),r??n},e.type="legend.scroll",e}(Hi);function Ls(i){i.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(a){a.setScrollDataIndex(r)})})}function Is(i){At(Fi),i.registerComponentModel(Cs),i.registerComponentView(Ts),Ls(i)}function Es(i){At(Fi),At(Is)}export{Ms as a,ks as b,Bs as c,Os as d,Es as e,Rs as f,Ps as i};
